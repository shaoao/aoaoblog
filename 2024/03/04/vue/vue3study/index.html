<!doctype html>
<html lang="zh"><head>
<title>Vue3学习笔记 - 奥奥の探索日记</title>
<meta charset="UTF-8">
<meta name="keywords" content="生活,摇滚,记录,编程,学习,剪辑,设计,项目,音乐">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
<meta name="referrer" content="no-referrer" />

<!-- 51la统计 -->
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3HQkdjDrH5f6vdfQ",ck:"3HQkdjDrH5f6vdfQ"})</script>

<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="description" content="最近想复习一下Vue3的整体过程，打算重新学一遍的Vue3+TS的教程，现在准备开始学，并且做好笔记。 Vue3官网 Vue.js - 渐进式 JavaScript 框架 | Vue.js (vuejs.org) 尚硅谷笔记链接大全：资料 一共是71集，全长大约14个小时，从2024.03.04下午16:30开始学习，至此，开始记录。 编码规范为：TS+组合式API+Setup语法糖 Webpac">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3学习笔记">
<meta property="og:url" content="https://sawr.gitee.io/2024/03/04/vue/vue3study/index.html">
<meta property="og:site_name" content="奥奥の探索日记">
<meta property="og:description" content="最近想复习一下Vue3的整体过程，打算重新学一遍的Vue3+TS的教程，现在准备开始学，并且做好笔记。 Vue3官网 Vue.js - 渐进式 JavaScript 框架 | Vue.js (vuejs.org) 尚硅谷笔记链接大全：资料 一共是71集，全长大约14个小时，从2024.03.04下午16:30开始学习，至此，开始记录。 编码规范为：TS+组合式API+Setup语法糖 Webpac">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304164337.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304170038.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304194233.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304214347.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304214644.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304215204.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304215417.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304221426.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304223407.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240305002230.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/asdasddafasfgdfhdfhj.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240306184915.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240306185423.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240306190055.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240306190647.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240315191404.png">
<meta property="og:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240316160501.png">
<meta property="og:image" content="http://49.232.112.44/images/default_slot.png">
<meta property="article:published_time" content="2024-03-03T16:00:00.000Z">
<meta property="article:modified_time" content="2024-04-10T09:07:10.476Z">
<meta property="article:author" content="ShaoAo">
<meta property="article:tag" content="TypeScript">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/sawr/personalimage/raw/master/img/20240304164337.png">

<link rel="stylesheet" href="/lib/fancybox/fancybox.css">
<link rel="stylesheet" href="/lib/mdui_043tiny/mdui.css">


<link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1714719124700">

    <link rel="stylesheet" href="//at.alicdn.com/t/c/font_4474869_y3x62ji5c4.css">

<link rel="stylesheet" href="/css/style.css?v=1714719124700">




    
        <link rel="stylesheet" href="/custom.css?v=1714719124700">
    



<script src="/lib/mdui_043tiny/mdui.js" async></script>
<script src="/lib/fancybox/fancybox.umd.js" async></script>
<script src="/lib/lax.min.js" async></script>


<script async src="/js/app.js?v=1714719124700"></script>

 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4D4ZJ9G024"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag("js", new Date());

  gtag("config", "G-4D4ZJ9G024");
</script>


<link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-shiki-plugin@latest/lib/codeblock.css">
<style>:root{--hl-color:#e1e4e8;--hl-bg:#24292e;--hltools-bg:#1f2428;--hltools-color:#c5c5c5;--hlnumber-bg:#24292e;--hlnumber-color:#444d56;--hlscrollbar-bg:#32383e;--hlexpand-bg:linear-gradient(180deg,rgba(36,41,46,0.1),rgba(36,41,46,0.9))}</style>
    <style>
    .code-expand-btn:not(.expand-done) ~ div.codeblock,
    .code-expand-btn:not(.expand-done) ~ * div.codeblock {
      overflow: hidden;
      height: 360px;
    }
    </style>
  <!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head><body class="nexmoe mdui-drawer-body-left"><div id="nexmoe-background"><div class="nexmoe-bg" style="background-image: url(https://tucdn.wpon.cn/2024/03/23/2247604107188.jpg)"></div><div class="mdui-appbar mdui-shadow-0"><div class="mdui-toolbar"><a class="mdui-btn mdui-btn-icon mdui-ripple" mdui-drawer="{target: &#039;#drawer&#039;, swipe: true}" title="menu"><i class="mdui-icon nexmoefont icon-menu"></i></a><div class="mdui-toolbar-spacer">奥奥の探索日记</div><a class="mdui-btn mdui-btn-icon" href="/" title="ShaoAo"><img src="https://cccimg.com/view.php/f8a4b6199c0c036da1f160b12d01f50d.jpg" alt="ShaoAo"></a></div></div></div><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="ShaoAo">
            <img src="https://cccimg.com/view.php/f8a4b6199c0c036da1f160b12d01f50d.jpg" alt="ShaoAo" alt="ShaoAo">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>18</div>
        <div><span>标签</span>19</div>
        <div><span>分类</span>6</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/PY.html" title="常看">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                常看
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于
            </div>
        </a>
        
    </div>
    
    
        
        <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        
            <form id="search_form">
                <label><input class="st-default-search-input" id="search_value" name="q" type="search" placeholder="搜索全站" style="
                    font-size: 15px !important;
                    height: 56px !important;
                    background-image: none;
                "></label>
            </form>
         
    </div>
</div>


	<script async src="/js/search.js?v=1714719124700"></script>



    
        
        <div class="nexmoe-widget-wrap">
	<div class="nexmoe-widget nexmoe-social">
		<a
			class="mdui-ripple"
			href="https://space.bilibili.com/296465852"
			target="_blank"
			mdui-tooltip="{content: '哔哩哔哩'}"
			style="
				color: rgb(231, 106, 141);
				background-color: rgba(231, 106, 141, .1);
			"
		>
			<i
				class="nexmoefont icon-bilibili"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://github.com/shaoao/"
			target="_blank"
			mdui-tooltip="{content: 'GitHub'}"
			style="
				color: rgb(25, 23, 23);
				background-color: rgba(25, 23, 23, .1);
			"
		>
			<i
				class="nexmoefont icon-githubic"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://www.travellings.cn/go.html"
			target="_blank"
			mdui-tooltip="{content: '开往'}"
			style="
				color: rgb(251,109,72);
				background-color: rgba(251,109,72, .1);
			"
		>
			<i
				class="nexmoefont icon-ditiexiao"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://www.xiaohongshu.com/user/profile/60d9e8d7000000002002c59b"
			target="_blank"
			mdui-tooltip="{content: '小红书'}"
			style="
				color: rgb(255,46,77);
				background-color: rgba(255,46,77, .1);
			"
		>
			<i
				class="nexmoefont icon-xiaohongshu"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://steamcommunity.com/profiles/76561198846317988/"
			target="_blank"
			mdui-tooltip="{content: 'Steam'}"
			style="
				color: rgb(21,114,182);
				background-color: rgba(21,114,182, .1);
			"
		>
			<i
				class="nexmoefont icon-steam"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://twitter.com/woaiwr"
			target="_blank"
			mdui-tooltip="{content: 'Twitter'}"
			style="
				color: rgb(59, 151, 239);
				background-color: rgba(59, 151, 239, .1);
			"
		>
			<i
				class="nexmoefont icon-twitter"
			></i> </a
		><a
			class="mdui-ripple"
			href="https://www.douyin.com/user/MS4wLjABAAAAbyj8R7eEae7UC9UMWpJKXAtr-vIBkvHzkY7iJT8dXJE?relation=0&vid=7354414206428499236"
			target="_blank"
			mdui-tooltip="{content: '抖音'}"
			style="
				color: rgb( 23, 11, 26);
				background-color: rgba( 23, 11, 26, .1);
			"
		>
			<i
				class="nexmoefont icon-douyin"
			></i> </a
		>
	</div>
</div>

    
        
        
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/tools/">tools</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/前端/">前端</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/后端/">后端</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/小技巧/">小技巧</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/生活随笔/">生活随笔</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/英语/">英语</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


    
        
        
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JavaScript/" style="font-size: 13.33px;">JavaScript</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/TypeScript/" style="font-size: 13.33px;">TypeScript</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/%E5%9B%BE%E5%BA%8A%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">图床配置</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">学习</a> <a href="/tags/%E5%B1%B1%E9%87%8E%E6%97%A5%E5%BF%97/" style="font-size: 10px;">山野日志</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">工具</a> <a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 20px;">教程</a> <a href="/tags/%E6%9C%89%E7%94%A8%E5%88%86%E4%BA%AB/" style="font-size: 13.33px;">有用分享</a> <a href="/tags/%E7%88%AC%E5%B1%B1/" style="font-size: 10px;">爬山</a> <a href="/tags/%E8%8B%B1%E8%AF%AD%E5%8D%95%E8%AF%8D/" style="font-size: 10px;">英语单词</a> <a href="/tags/%E8%AE%B0%E5%BD%95%E7%94%9F%E6%B4%BB/" style="font-size: 16.67px;">记录生活</a> <a href="/tags/%E8%BF%90%E5%8A%A8/" style="font-size: 10px;">运动</a> <a href="/tags/%E9%95%9C%E5%83%8F%E6%BA%90/" style="font-size: 10px;">镜像源</a> <a href="/tags/%E9%AA%91%E8%A1%8C/" style="font-size: 10px;">骑行</a>
    </div>
    
      <script>
        var maxTagcloud = parseInt(17);
        var tags_length = parseInt(19);
        var tags_arr = [];
        for(var i = 0; i < tags_length; i++){
          tags_arr.push(i);
        }
        tags_arr.sort(function (l, r) {
          return Math.random() > 0.5 ? -1 : 1;
        });
        tags_arr = tags_arr.slice(0, maxTagcloud < tags_length ? tags_length - maxTagcloud : 0);
        for(var tag_i = 0; tag_i < tags_arr.length; tag_i++){
          document.getElementById("randomtagcloud").children[tags_arr[tag_i]].style.display = 'none';
        }
      </script>
    
  </div>

    
        
        
        
        
   
    <!-- <div class="nexmoe-copyright">
        &copy; 2024 ShaoAo
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2058306854838448" crossorigin="anonymous"></script>

    </div> -->

    <!-- 网站访问量侧边展示 -->
    <!-- <div class="nexmoe-copyright">
        <script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3HQkdjDrH5f6vdfQ/quote.js?theme=0&f=12&display=0,0,0,1,0,0,0,1"></script>
    </div> -->
</div><!-- .nexmoe-drawer --></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-post">
  <article>
    
        <div class="nexmoe-post-cover absolute" style="padding-top: 37.5%;"> 
            <img src="https://gitee.com/sawr/personalimage/raw/master/img/v2-e4ffb142ad927696cca00e88e1bf53fa_r.jpg" alt="Vue3学习笔记" loading="lazy">
            <h1>Vue3学习笔记</h1>
        </div>
    
    
    <div class="nexmoe-post-meta">
    <div class="nexmoe-rainbow">
        <a class="nexmoefont icon-calendar-fill">2024年03月04日</a>
        
            <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a>
        
        
    </div>
    
    
    
    
    
</div>

    <p>最近想复习一下Vue3的整体过程，打算重新学一遍的Vue3+TS的教程，现在准备开始学，并且做好笔记。</p>
<p>Vue3官网 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/">Vue.js - 渐进式 JavaScript 框架 | Vue.js (vuejs.org)</a></p>
<p>尚硅谷笔记链接大全：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1Hx5hWneJQ-4yFteE1iM9qw?pwd=yyds">资料</a></p>
<p>一共是71集，全长大约14个小时，从2024.03.04下午16:30开始学习，至此，开始记录。</p>
<p>编码规范为：TS+组合式API+Setup语法糖</p>
<h2 id="Webpack和Vite的构建区别">Webpack和Vite的构建区别<a class="anchor" href="#Webpack和Vite的构建区别">·</a></h2>
<p>Webpack：从入口进入，先扫描路由，然后扫描每一个模块，然后开始bundle，最后ServerReady，也就是说不管你用不用到的东西，都给你加载了，然后再给你看结果，就会比较慢。
Vite：我直接给你看结果，你想看哪个我给你加载哪个，等于变聪明了。</p>
<p>一句话：Vite比Webpack快。</p>
<h2 id="Vue3创建步骤">Vue3创建步骤<a class="anchor" href="#Vue3创建步骤">·</a></h2>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">create</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">vue@latest</span></span></code></pre></div></div></figure>
<p>然后根据所需进行配置即可。</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304164337.png" alt="" data-caption="" loading="lazy"></p>
<p>然后</p>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #79B8FF">cd</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">&lt;</span><span style="color: #9ECBFF">your-project-nam</span><span style="color: #E1E4E8">e</span><span style="color: #F97583">&gt;</span></span>
<span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">install</span></span>
<span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">run</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">dev</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">#or</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">yarn</span></span>
<span class="line"><span style="color: #B392F0">yarn</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">dev</span></span></code></pre></div></div></figure>
<h2 id="项目整体文件介绍">项目整体文件介绍<a class="anchor" href="#项目整体文件介绍">·</a></h2>
<p><code>.vscode - extensions.json</code> ：表示所需要安装用到的扩展插件.
删了也没事,但是留着也不占地方.</p>
<p><code>env.d.ts</code>:这里面的配置代码,主要目的就是让TS认识各种类型的文件. 例如css,sass,jpg等各种类型的文件.</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304170038.png" alt="" data-caption="" loading="lazy"></p>
<p><code>index.html</code>:项目的入口文件,通过该文件引入的<code>src/main.ts</code>文件,可以让整个项目跑起来</p>
<p><code>vite.config.ts</code>:整个项目的配置文件,可以配置插件,代理等之类的</p>
<hr>
<p><strong>src/main.ts</strong>简单介绍</p>
<p>在 Vue 3 中，createApp 是用来创建一个 Vue 应用实例的工厂函数。
<code>import &#123; createApp &#125; from 'vue'</code></p>
<p>这行代码是导入了应用的根组件。
<code>import App from './App.vue'</code></p>
<p>把vue挂在到指定元素上
<code>createApp(App).mount('#app')</code></p>
<hr>
<h2 id="结构">结构<a class="anchor" href="#结构">·</a></h2>
<h3 id="选项式API和组合式API">选项式API和组合式API<a class="anchor" href="#选项式API和组合式API">·</a></h3>
<p>选项式API一般是在Vue2中使用.</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304194233.png" alt="" data-caption="" loading="lazy"></p>
<p>白色框这些都属于是<strong>配置项</strong>,也就是<strong>选项式API</strong>,学Vue2就等于是在学这些配置项。</p>
<p>选项式API的英文名叫OptionsAPI，但是在Vue3中提出了一种新的组合式API(CompositionAPI) 。Vue2的API是OptionsAPI风格的。Vue3的API是CompositionAPI风格的。</p>
<p>OptionsAPI(选项式API)的弊端就是，<strong>数据、方法、计算属性</strong>等等都被拆分开了，当你需要改动一个东西的时候，那么你就需要同时在Data、methods等等这些方法里面去修改，<strong>不便于修复和维护</strong>。</p>
<p>CompositionAPI(组合式API)把一个<strong>整体</strong>都放在一个函数方法里(Function)，这样很符合逻辑而且也方便维护。</p>
<h2 id="Vue3-核心语法">Vue3 核心语法<a class="anchor" href="#Vue3-核心语法">·</a></h2>
<h3 id="Setup">Setup<a class="anchor" href="#Setup">·</a></h3>
<p><code>Setup</code>是Vue3中的一个新的配置项，它的值是一个函数，他是<code>CompositionAPI</code>&quot;表演的舞台&quot;，组件中所有用到的数据、方法、计算属性、监视…等，均配置在<code>Setup</code>里面。</p>
<p>Vue2的代码</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">&lt;</span><span style="color: #E1E4E8">script lang</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #F97583">&gt;</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">    name:</span><span style="color: #9ECBFF">&#39;Person&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">data</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #F97583">return</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">            name:</span><span style="color: #9ECBFF">&#39;张三&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">            age:</span><span style="color: #79B8FF">18</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">            tel:</span><span style="color: #9ECBFF">&#39;12345678901&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">        }</span></span>
<span class="line"><span style="color: #E1E4E8">    },</span></span>
<span class="line"><span style="color: #E1E4E8">    methods:{</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #B392F0">showTel</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #B392F0">alert</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.tel)</span></span>
<span class="line"><span style="color: #E1E4E8">        }</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"><span style="color: #F97583">&lt;/</span><span style="color: #E1E4E8">script</span><span style="color: #F97583">&gt;</span></span></code></pre></div></div></figure>
<p>改为<code>Vue3</code>数据编写方法更集中了，但是如果通过方法来更改参数的值，那么会改变值但就不是响应式数据了,就无法同步到页面中。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">setup</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// setup函数中的this是undefined，因为setup函数本身没有this，vue3开始弱化this了。</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 此时的name、age、tel都不是响应式的数据。</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;张三&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> age </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">18</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> tel </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;123456789&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">showTel</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">alert</span><span style="color: #E1E4E8">(tel)</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> {name,age,showTel}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>setup函数的返回值也可以直接是一个<strong>渲染函数</strong>，可以直接指定渲染的内容，例如</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">setup</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> () </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;你好&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>此时的页面上就会只显示<code>你好</code>这两个字，之前写的div之类的都没有用了，但是这个是不常用的。</p>
<blockquote>
<p>Vue2中的语法比如data、methods是可以和vue3中的setup共存的，但是vue2的data、methods等，是可以通过this来调用setup里面的数据的，但是setup调用不了vue2其中的数据。</p>
</blockquote>
<h3 id="setup语法糖">setup语法糖<a class="anchor" href="#setup语法糖">·</a></h3>
<p>语法糖说白了就是更简单的写法。</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304214347.png" alt="" data-caption="" loading="lazy"></p>
<p>在script标签中，我想要无非就是数据以及函数方法，但是每个都还要进行导出，假如数据量比较大，其中一个我忘记return导出了，那岂不是出现很大的问题了，而且多了要一一导出代码也看着比较臃肿，所以就有了这个东西<code>setup语法糖</code>，至于为什么叫这个，我估计是这样写起来会有种尝到甜头的感觉，很方便。</p>
<p>于是代码就变成了这样，所有的数据以及函数都不需要导出了，就很方便。</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304214644.png" alt="" data-caption="" loading="lazy"></p>
<h3 id="name名称插件">name名称插件<a class="anchor" href="#name名称插件">·</a></h3>
<p>这样写看着也有些麻烦，写了两个<code>script</code>，但可以通过一个官方插件来缩短成一个<code>script</code>，开发依赖，所以加上<code>-D</code></p>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">i</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">vite-plugin-vue-setup-extend</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">-D</span></span></code></pre></div></div></figure>
<p>然后在<code>vite.config.ts</code>中引用，注意两个白线的地方。</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304215204.png" alt="" data-caption="" loading="lazy"></p>
<p>此时就可以只写一个<code>script</code>了</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304215417.png" alt="" data-caption="" loading="lazy"></p>
<p>这种写<code>name</code>的情况可以应对，有时候公司的组件会写成<code>文件夹名/index.vue</code>，这种情况，就可以使用name来区分。</p>
<h2 id="响应式数据">响应式数据<a class="anchor" href="#响应式数据">·</a></h2>
<h3 id="ref创建基本类型响应式数据">ref创建基本类型响应式数据<a class="anchor" href="#ref创建基本类型响应式数据">·</a></h3>
<p>在vue2中，你的数据只要是写在data()里面，那么就默认是响应式数据。</p>
<ol>
<li>ref</li>
</ol>
<p>reactive可以构建<strong>对象类型响应式数据</strong>也可以构建<strong>基本类型响应式数据</strong>。</p>
<p>首先引用<code>ref</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {ref} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span></code></pre></div></div></figure>
<p>然后你想让哪个数据变成响应式数据就用ref包裹住。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;张三&#39;</span><span style="color: #E1E4E8">)</span></span></code></pre></div></div></figure>
<p>此时name就已经变成了一个响应式数据，所谓响应式数据就是你在修改这个<code>name</code>值的时候，在页面上会同步更新，很方便。</p>
<p>此时如果<code>console.log</code>打印一下<code>name</code>的话，那么就会发现已经变成了一个对象，但是在引用的时候不需要加<code>.value</code>，因为vue3会自动帮你加。</p>
<p>但是在JS以及TS中！必须要写<code>.value</code>！不然将会无法操作这个值！</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304221426.png" alt="" data-caption="" loading="lazy"></p>
<blockquote>
<p>ref也可以对对象类型进行创建响应式数据，和reactive一样，也是直接包裹住即可，但是当你在JS以及TS中进行调用的时候，值得注意的是<code>.value</code>的位置</p>
</blockquote>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 对象</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">changePrice</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	car.value.price </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">10</span><span style="color: #E1E4E8">;</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 数组</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">changeArr</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	arr.value[</span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">].name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;王五&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<h3 id="reactive-构建对象类型响应式数据">reactive 构建对象类型响应式数据<a class="anchor" href="#reactive-构建对象类型响应式数据">·</a></h3>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { reactive } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span><span style="color: #E1E4E8">;</span></span></code></pre></div></div></figure>
<p>此时对于一个对象类型的数据，也变成响应式数据了</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240304223407.png" alt="" data-caption="" loading="lazy"></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> arr </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> [</span></span>
<span class="line"><span style="color: #E1E4E8">  { name: </span><span style="color: #9ECBFF">&quot;张三&quot;</span><span style="color: #E1E4E8">, age: </span><span style="color: #79B8FF">18</span><span style="color: #E1E4E8"> },</span></span>
<span class="line"><span style="color: #E1E4E8">  { name: </span><span style="color: #9ECBFF">&quot;李四&quot;</span><span style="color: #E1E4E8">, age: </span><span style="color: #79B8FF">20</span><span style="color: #E1E4E8"> },</span></span>
<span class="line"><span style="color: #E1E4E8">];</span></span></code></pre></div></div></figure>
<p>数组也是同样的包裹，此时该数组也变成响应式数组了，可以直接更改<code>arr[0].name = '王五'</code>，此时页面也会进行渲染。</p>
<p>reactive也是深层次的，不管数据内嵌套了多少层，知道找到了就可以变成响应式。</p>
<ul>
<li>reactive包裹的对象打印出来一般是<code>Proxy</code>开头。</li>
<li>而ref包裹的对象打印出来一般是<code>RefImpl</code>开头。</li>
</ul>
<p><code>ref</code>表面上什么类型都可以处理，但是对于对象类型，底层还是通过<code>reactive</code>实现的。</p>
<h3 id="ref和reactive的区别">ref和reactive的区别<a class="anchor" href="#ref和reactive的区别">·</a></h3>
<p>ref的<code>.value</code>每次都要手写，就很麻烦，如果忘了可能又是一个bug，所有volar插件提供了一个功能，可以在vscode的设置中找到</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240305002230.png" alt="" data-caption="" loading="lazy"></p>
<p>一开始是没有勾选的，给它勾上就行了。</p>
<p>reactive重新分配一个对象，就会失去响应式。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> car </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({ brand: </span><span style="color: #9ECBFF">&quot;奔驰&quot;</span><span style="color: #E1E4E8">, price: </span><span style="color: #79B8FF">200</span><span style="color: #E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 修改整个对象</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">changeCar</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	car </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> {brand: </span><span style="color: #9ECBFF">&quot;仰望&quot;</span><span style="color: #E1E4E8">,price:</span><span style="color: #79B8FF">220</span><span style="color: #E1E4E8">}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>如果这样，那么car将会失去响应式数据效果，那么应该如何解决这种情况。</p>
<p>只需要使用<code>Object对象的assign方法</code>进行整体替换，如果有多个对象那么都是添加到第一个参数上。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> car </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({ brand: </span><span style="color: #9ECBFF">&quot;奔驰&quot;</span><span style="color: #E1E4E8">, price: </span><span style="color: #79B8FF">200</span><span style="color: #E1E4E8"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 修改整个对象</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">changeCar</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">  car </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> Object.</span><span style="color: #B392F0">assign</span><span style="color: #E1E4E8">(car,{brand: </span><span style="color: #9ECBFF">&quot;仰望&quot;</span><span style="color: #E1E4E8">,price:</span><span style="color: #79B8FF">220</span><span style="color: #E1E4E8">})</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>但是如果使用的是ref进行定义响应式数据，就可以直接进行更改，可以理解为只要是带<code>.value</code>那么就必然是响应式数据，无论基础类型还是对象类型。</p>
<h3 id="torefs和toref">torefs和toref<a class="anchor" href="#torefs和toref">·</a></h3>
<p>torefs：把一个reactive所定义的所有对象都变成一个ref所组成的对象。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> person </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">	name:</span><span style="color: #9ECBFF">&#39;张三&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	age:</span><span style="color: #79B8FF">18</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {name,age} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">toRefs</span><span style="color: #E1E4E8">(person)</span></span></code></pre></div></div></figure>
<p>上面的代码，如果在 <code>=</code>后面没有加<code>toRefs</code>那么name和age将不会是响应式数据，并且修改nage和age也会同步修改person.name和person.age。</p>
<p>toref：可以单独拎出来reactive定义的对象中的一个数据，并且也变成ref响应式数据。</p>
<h3 id="computed计算属性">computed计算属性<a class="anchor" href="#computed计算属性">·</a></h3>
<p>在Vue3中<code>computed</code>是一个函数，需要引用使用，<code>computed</code>拥有缓存，比function函数要聪明一些，例如要进行计算一个名称首字母大写。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { ref,computed } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span><span style="color: #E1E4E8">;</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> firstName </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;zhang&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> lastName </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;san&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> fullName </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">computed</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> full </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> firstName.value.</span><span style="color: #B392F0">slice</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">).</span><span style="color: #B392F0">toUpperCase</span><span style="color: #E1E4E8">() </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> firstName.value.</span><span style="color: #B392F0">slice</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39; &#39;</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> lastName.value</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> full</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>此时在页面上调用<code>fullName</code>即可出现首字母大写的名字组合，如果多次调用也只会计算一次，因为当computed是带有缓存的，但是这个是只读的，不能修改。</p>
<p>可读可写响应式数据需要调用<strong>get、set</strong>方法，set是带参数的，参数则是<strong>fullName的值</strong></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> fullName </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">computed</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">get</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> firstName.value.</span><span style="color: #B392F0">slice</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">).</span><span style="color: #B392F0">toUpperCase</span><span style="color: #E1E4E8">() </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> firstName.value.</span><span style="color: #B392F0">slice</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39; &#39;</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> lastName.value</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">set</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">val</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">    firstName.value </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> val.</span><span style="color: #B392F0">split</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39; &#39;</span><span style="color: #E1E4E8">)[</span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">]</span></span>
<span class="line"><span style="color: #E1E4E8">    lastName.value </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> val.</span><span style="color: #B392F0">split</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39; &#39;</span><span style="color: #E1E4E8">)[</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">]</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>简单来说就是如果需要从多个数据中重新计算出来一个新的，就用<code>computed</code>计算属性就可以了，计算属性计算出来的数据也是一个<strong>ref响应式数据</strong></p>
<h2 id="watch-监视">watch 监视<a class="anchor" href="#watch-监视">·</a></h2>
<h3 id="1-监视ref定义的基本类型数据">1.监视ref定义的基本类型数据<a class="anchor" href="#1-监视ref定义的基本类型数据">·</a></h3>
<p>首先还是引用<strong>watch</strong>，然后定义一个<code>sum = ref(0)</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">(sum,(</span><span style="color: #FFAB70">newValue</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">oldValue</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;sum变化了&#39;</span><span style="color: #E1E4E8">,newValue,oldValue）			</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>当你改变了sum值后，数据结果为</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">sum变化了 </span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">0</span></span>
<span class="line"><span style="color: #E1E4E8">sum变化了 </span><span style="color: #79B8FF">2</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1</span></span>
<span class="line"><span style="color: #E1E4E8">sum变化了 </span><span style="color: #79B8FF">3</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">2</span></span></code></pre></div></div></figure>
<p>重点：在vue3中<code>watch</code>函数返回一个用于停止监控的函数，这个返回的函数就是用来取消监控的，从而停止执行回调函数。</p>
<p>例子：当sum大于10的时候停止监控</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">stopWatch</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">(sum,(</span><span style="color: #FFAB70">newValue</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">oldValue</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">if</span><span style="color: #E1E4E8"> (newValue </span><span style="color: #F97583">&gt;</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">10</span><span style="color: #E1E4E8">) {</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">stopWatch</span><span style="color: #E1E4E8">();</span></span>
<span class="line"><span style="color: #E1E4E8">	}		</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<h3 id="2-监视ref定义的对象类型数据">2.监视ref定义的对象类型数据<a class="anchor" href="#2-监视ref定义的对象类型数据">·</a></h3>
<p>监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启<strong>深度监视</strong>。</p>
<p>前面使用的时候只调用了watch函数的前两个参数，开启<strong>深度监视</strong>就需要添加第三个参数，假设sun是一个对象数据，那么代码为：</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">(sum,(</span><span style="color: #FFAB70">newValue</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">oldValue</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;sum变化了&#39;</span><span style="color: #E1E4E8">,newValue,oldValue）			</span></span>
<span class="line"><span style="color: #E1E4E8">},{deep:</span><span style="color: #79B8FF">true</span><span style="color: #E1E4E8">}) </span><span style="color: #6A737D">// 深度模式为真</span></span></code></pre></div></div></figure>
<p>这样无论是修改整个对象数据，还是修改对象属性都会被监视。</p>
<p>第三个参数，是类似于配置项的参数，有多个配置，比如</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// deep：深度模式 immediate：立即监视  </span></span>
<span class="line"><span style="color: #E1E4E8">{</span><span style="color: #B392F0">deep</span><span style="color: #E1E4E8">:</span><span style="color: #79B8FF">true</span><span style="color: #E1E4E8">,</span><span style="color: #B392F0">immediate</span><span style="color: #E1E4E8">:</span><span style="color: #79B8FF">true</span><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>watch的第一个参数：被监视的数据
watch的第二个参数：监视的回调
watch的第三个参数：配置对象(deep、immediate等…)</p>
<p>newValue**,<strong>oldValue</strong>打印出来的值是相同的，这个问题的原因是地址值没有变，在打印出来的时候还是原来的地址，所以会相同，房子没换，换了壁纸和沙发。</p>
<h3 id="3-监视reactive定义的对象类型数据">3.监视reactive定义的对象类型数据<a class="anchor" href="#3-监视reactive定义的对象类型数据">·</a></h3>
<p>reactive是默认开启深度监视的，所以可以直接监视对象内部属性的变化，无需开启深度模式，但是也是不可以关闭的，官方说话：隐式创建深度模式。</p>
<p>watch函数和function一样都可以写多个。</p>
<h3 id="4-监视ref或reactive定义对象类型数据中的某个属性">4.监视ref或reactive定义对象类型数据中的某个属性<a class="anchor" href="#4-监视ref或reactive定义对象类型数据中的某个属性">·</a></h3>
<p>若监视<strong>对象类型</strong>的某个属性是<strong>基本类型</strong>，需要写成<strong>函数形式(箭头函数)</strong></p>
<p>可以在watch的第一个参数中，使用箭头函数来监视对象中的具体的一个值，比如</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">(() </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> {</span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> state.count}, (</span><span style="color: #FFAB70">newValue</span><span style="color: #E1E4E8">, </span><span style="color: #FFAB70">oldValue</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">`count 值从 ${</span><span style="color: #E1E4E8">oldValue</span><span style="color: #9ECBFF">} 更新为 ${</span><span style="color: #E1E4E8">newValue</span><span style="color: #9ECBFF">}`</span><span style="color: #E1E4E8">);</span></span>
<span class="line"><span style="color: #E1E4E8">});</span></span></code></pre></div></div></figure>
<p>但是<strong>大括号和return</strong>是可以省略的于是就可以直接</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { watch, reactive } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span><span style="color: #E1E4E8">; </span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">state</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({ </span></span>
<span class="line"><span style="color: #E1E4E8">	count: </span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">, </span></span>
<span class="line"><span style="color: #E1E4E8">	message: </span><span style="color: #9ECBFF">&#39;Hello!&#39;</span><span style="color: #E1E4E8"> </span></span>
<span class="line"><span style="color: #E1E4E8">}); </span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">(() </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> state.count, (</span><span style="color: #FFAB70">newValue</span><span style="color: #E1E4E8">, </span><span style="color: #FFAB70">oldValue</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">`count 值从 ${</span><span style="color: #E1E4E8">oldValue</span><span style="color: #9ECBFF">} 更新为 ${</span><span style="color: #E1E4E8">newValue</span><span style="color: #9ECBFF">}`</span><span style="color: #E1E4E8">);</span></span>
<span class="line"><span style="color: #E1E4E8">}); </span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 修改 count 的值会触发 watch 的回调 </span></span>
<span class="line"><span style="color: #E1E4E8">state.count</span><span style="color: #F97583">++</span><span style="color: #E1E4E8">;</span></span></code></pre></div></div></figure>
<p>但是如果监视的对象数据的<strong>属性</strong>是<strong>对象类型</strong>，可以直接写，也可以写成函数，<strong>但是建议写成函数</strong>，如果要监视对象类型的属性的细枝末节内部变化，需要手动开启深度模式<code>deep:true</code>。</p>
<h3 id="5-监视上述的多个数据">5.监视上述的多个数据<a class="anchor" href="#5-监视上述的多个数据">·</a></h3>
<p>监视多个数据，通过使用数据包裹起来即可，还是普通数据用函数，对象数据建议函数也可以直接使用。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 监视，情况五：监视上述的多个数据</span></span>
<span class="line"><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">([()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">person.name,person.car](newValue,oldValue)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">    console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;person.car变化了&#39;</span><span style="color: #E1E4E8">,newValue,oldValue)</span></span>
<span class="line"><span style="color: #E1E4E8">},{deep:</span><span style="color: #79B8FF">true</span><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<h3 id="watchEffect">watchEffect<a class="anchor" href="#watchEffect">·</a></h3>
<ul>
<li>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</li>
</ul>
<p>就是刚开始就会执行一次，你不需要明确给我提出具体要监控谁，你要用到谁我就自动监控谁。</p>
<ul>
<li><code>watch</code>对比<code>watchEffect</code>
<blockquote>
<ol>
<li>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</li>
<li><code>watch</code>：要明确指出监视的数据</li>
<li><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</li>
</ol>
</blockquote>
</li>
</ul>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 用watch实现，需要明确的指出要监视：temp、height</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #B392F0">watch</span><span style="color: #E1E4E8">([temp,height],(</span><span style="color: #FFAB70">value</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #6A737D">// 从value中获取最新的temp值、height值</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> [</span><span style="color: #79B8FF">newTemp</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">newHeight</span><span style="color: #E1E4E8">] </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> value</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #6A737D">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">if</span><span style="color: #E1E4E8">(newTemp </span><span style="color: #F97583">&gt;=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">50</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">||</span><span style="color: #E1E4E8"> newHeight </span><span style="color: #F97583">&gt;=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">20</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">     console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;联系服务器&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">   }</span></span>
<span class="line"><span style="color: #E1E4E8"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 用watchEffect实现，不用</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">stopWtach</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">watchEffect</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #6A737D">// 室温达到50℃，或水位达到20cm，立刻联系服务器</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">if</span><span style="color: #E1E4E8">(temp.value </span><span style="color: #F97583">&gt;=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">50</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">||</span><span style="color: #E1E4E8"> height.value </span><span style="color: #F97583">&gt;=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">20</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">     console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(document.</span><span style="color: #B392F0">getElementById</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;demo&#39;</span><span style="color: #E1E4E8">)?.innerText)</span></span>
<span class="line"><span style="color: #E1E4E8">     console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;联系服务器&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">   }</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #6A737D">// 水温达到100，或水位达到50，取消监视</span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">if</span><span style="color: #E1E4E8">(temp.value </span><span style="color: #F97583">===</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">100</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">||</span><span style="color: #E1E4E8"> height.value </span><span style="color: #F97583">===</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">50</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">     console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;清理了&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">     </span><span style="color: #B392F0">stopWtach</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">   }</span></span>
<span class="line"><span style="color: #E1E4E8"> })</span></span></code></pre></div></div></figure>
<h2 id="标签的ref属性">标签的ref属性<a class="anchor" href="#标签的ref属性">·</a></h2>
<p>作用：用于注册模板引用。</p>
<blockquote>
<p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p>
<p>用在组件标签上，获取的是组件实例对象(函数)。</p>
</blockquote>
<p>用在普通html标签上，是直接获取dom元素内容</p>
<p>用在组件标签上，需要通过引入<code>defineExpose</code>来导出内容</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">&lt;!-- 父组件App.vue --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #79B8FF">Person</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ren&quot;</span><span style="color: #E1E4E8">/&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8"> @</span><span style="color: #B392F0">click</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">test</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;测试&lt;/</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;App&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> Person </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;./components/Person.vue&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {ref} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> ren </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">test</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">    console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(ren.value.name)</span></span>
<span class="line"><span style="color: #E1E4E8">    console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(ren.value.age)</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;Person&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {ref,defineExpose} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 数据</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> name </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;张三&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> age </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">18</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">/****************************/</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">/****************************/</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 使用defineExpose将组件中的数据交给外部</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">defineExpose</span><span style="color: #E1E4E8">({name,age})</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h2 id="TS中的接口、泛型、自定义">TS中的接口、泛型、自定义<a class="anchor" href="#TS中的接口、泛型、自定义">·</a></h2>
<p><code>@</code>符号会直接跑到项目的根目录，从而方便引入。</p>
<h3 id="接口">接口<a class="anchor" href="#接口">·</a></h3>
<p>在TS使用接口来限制规范，新建一个</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/asdasddafasfgdfhdfhj.png" alt="" data-caption="" loading="lazy"></p>
<p>引用然后可以看到，如果我们设置的数据和接口设置的不一样，那么就会出错</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240306184915.png" alt="" data-caption="" loading="lazy"></p>
<p>如果是定义数组的话那就需要用到泛型</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240306185423.png" alt="" data-caption="" loading="lazy"></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> personList</span><span style="color: #F97583">:</span><span style="color: #B392F0">Array</span><span style="color: #E1E4E8">&lt;</span><span style="color: #B392F0">Person</span><span style="color: #E1E4E8">&gt; </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> [</span></span>
<span class="line"><span style="color: #E1E4E8">    { id: </span><span style="color: #9ECBFF">&quot;13&quot;</span><span style="color: #E1E4E8">, name: </span><span style="color: #9ECBFF">&quot;张三&quot;</span><span style="color: #E1E4E8">, age: </span><span style="color: #79B8FF">18</span><span style="color: #E1E4E8"> },</span></span>
<span class="line"><span style="color: #E1E4E8">    { id: </span><span style="color: #9ECBFF">&quot;14&quot;</span><span style="color: #E1E4E8">, name: </span><span style="color: #9ECBFF">&quot;李四&quot;</span><span style="color: #E1E4E8">, age: </span><span style="color: #79B8FF">19</span><span style="color: #E1E4E8"> },</span></span>
<span class="line"><span style="color: #E1E4E8">    { id: </span><span style="color: #9ECBFF">&quot;15&quot;</span><span style="color: #E1E4E8">, name: </span><span style="color: #9ECBFF">&quot;王五&quot;</span><span style="color: #E1E4E8">, age: </span><span style="color: #79B8FF">20</span><span style="color: #E1E4E8"> }</span></span>
<span class="line"><span style="color: #E1E4E8">]</span></span></code></pre></div></div></figure>
<p>代码意思是，数组中的每一项都要符合这个数据规范，所以用到了Array，多个泛型在<code>Person</code>后面直接加就行，比如：<code>Array&lt;Person,Student,Order&gt;</code></p>
<p>还有一种方法就是用到<code>自定义类型</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 定义一个结构，用于限制person对象的具体属性</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">interface</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Person</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #FFAB70">id</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #FFAB70">name</span><span style="color: #F97583">:</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #FFAB70">age</span><span style="color: #F97583">:</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">number</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 定义一个自定义类型，用于处理数组对象的具体属性</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">type</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Persons</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Array</span><span style="color: #E1E4E8">&lt;</span><span style="color: #B392F0">Person</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">//or</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">type</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Persons</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Person</span><span style="color: #E1E4E8">[]</span></span></code></pre></div></div></figure>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240306190055.png" alt="" data-caption="" loading="lazy"></p>
<h3 id="可选">可选<a class="anchor" href="#可选">·</a></h3>
<p>在定义接口的时候，如果有些属性是可选的可以后面+<code>?</code>，比如年龄可选，此时加上<code>?</code>以后，<code>age</code>参数可以不写</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 定义一个结构，用于限制person对象的具体属性</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">interface</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">Person</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #FFAB70">id</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #FFAB70">name</span><span style="color: #F97583">:</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #FFAB70">age</span><span style="color: #F97583">?:</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">number</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>如果是响应式数据reactive，可以这样</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240306190647.png" alt="" data-caption="" loading="lazy"></p>
<h2 id="props">props<a class="anchor" href="#props">·</a></h2>
<p>首先引入<code>defineProps</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {defineProps} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span></span></code></pre></div></div></figure>
<p>然后就可以接收父组件传过来的内容，必须要用数组来接收。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 只接收</span></span>
<span class="line"><span style="color: #B392F0">defineProps</span><span style="color: #E1E4E8">([</span><span style="color: #9ECBFF">&quot;list&quot;</span><span style="color: #E1E4E8">])</span></span>
<span class="line"><span style="color: #6A737D">//接收同时保存props，此时的x会把所有props返回值都接收</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> x </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineProps</span><span style="color: #E1E4E8">([</span><span style="color: #9ECBFF">&quot;list&quot;</span><span style="color: #E1E4E8">])</span></span></code></pre></div></div></figure>
<p><strong>只接收+限制类型</strong></p>
<p>这样更加严谨，标明我需要收到一个list，并且这个list必须是符合之前写的<strong>Persons</strong>接口标准的list，当开启这种限制以后，如果父传过来一个别的数据那么是传不过来的，切父组件必须传list过来。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {</span><span style="color: #F97583">type</span><span style="color: #E1E4E8"> Persons} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;@types&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">defineProps</span><span style="color: #E1E4E8">&lt;{</span><span style="color: #FFAB70">list</span><span style="color: #F97583">:</span><span style="color: #B392F0">Persons</span><span style="color: #E1E4E8">}&gt;([</span><span style="color: #9ECBFF">&quot;list&quot;</span><span style="color: #E1E4E8">])</span></span></code></pre></div></div></figure>
<p><strong>接收 + 限制类型 + 限制必要性 + 指定默认值</strong></p>
<p>当在list后面加上了一个<code>?</code>就可以让父组件可传可不传了。</p>
<p>但是如果不传数据，可以加一个默认值，在vue中引入<code>withDefaults</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {withDefualts} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {</span><span style="color: #F97583">type</span><span style="color: #E1E4E8"> Persons} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;@types&quot;</span></span>
<span class="line"><span style="color: #B392F0">withDefults</span><span style="color: #E1E4E8">(</span><span style="color: #B392F0">defineProps</span><span style="color: #E1E4E8">&lt;{</span><span style="color: #FFAB70">list</span><span style="color: #F97583">?:</span><span style="color: #B392F0">Persons</span><span style="color: #E1E4E8">}&gt;(),{</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">list</span><span style="color: #E1E4E8">:()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> [{ id: </span><span style="color: #9ECBFF">&quot;12&quot;</span><span style="color: #E1E4E8">, name: </span><span style="color: #9ECBFF">&quot;张三&quot;</span><span style="color: #E1E4E8">, age: </span><span style="color: #79B8FF">18</span><span style="color: #E1E4E8">}]</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>这种做法通常用于在组件中定义默认的 props 值,以防止在使用组件时没有传入 props 导致错误。如果组件接收到了 <code>list</code> prop,它将使用传入的值;如果没有传入 <code>list</code> prop,则会使用默认提供的值 <code>[&#123; id: '12', name: '张三', age: 18 &#125;]</code>。</p>
<blockquote>
<p>define开头的函数，其实可以不用引入，因为是<strong>宏函数</strong>可以直接拿来用。</p>
</blockquote>
<h2 id="生命周期">生命周期<a class="anchor" href="#生命周期">·</a></h2>
<p>组件的生命周期(生命周期函数、生命周期钩子)</p>
<table>
<thead>
<tr>
<th style="text-align:center">时刻</th>
<th style="text-align:center">调用特定的函数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">创建</td>
<td style="text-align:center">created</td>
</tr>
<tr>
<td style="text-align:center">挂载</td>
<td style="text-align:center">mounted</td>
</tr>
<tr>
<td style="text-align:center">更新</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">销毁</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h3 id="vue2的生命周期">vue2的生命周期<a class="anchor" href="#vue2的生命周期">·</a></h3>
<ol>
<li>
<p><strong>beforeCreate（创建前）</strong>：</p>
<ul>
<li>你可以在这个阶段做些准备工作，但是此时还没有真正创建 Vue 实例。也就是说，Vue 实例还没有被初始化。</li>
</ul>
</li>
<li>
<p><strong>created（创建后）</strong>：</p>
<ul>
<li>Vue 实例被创建好了，但是此时还没有开始创建真正的 DOM。你可以在这个时候做一些数据的初始化工作，或者请求一些初始数据。</li>
</ul>
</li>
<li>
<p><strong>beforeMount（挂载前）</strong>：</p>
<ul>
<li>这个阶段是在 Vue 开始把你的页面内容放到 DOM 中之前调用的。你可以在这里做一些DOM准备工作。</li>
</ul>
</li>
<li>
<p><strong>mounted（挂载后）</strong>：</p>
<ul>
<li>这时候 Vue 实例已经挂载到了页面上，你的页面已经显示了 Vue 组件的内容。通常你可以在这里做一些需要操作 DOM 的工作，比如初始化页面后的一些动画效果。</li>
</ul>
</li>
<li>
<p><strong>beforeUpdate（更新前）</strong>：</p>
<ul>
<li>在数据更新但页面尚未重新渲染时调用。你可以在这里做一些在更新前需要的操作，比如对比更新前后的数据。</li>
</ul>
</li>
<li>
<p><strong>updated（更新后）</strong>：</p>
<ul>
<li>数据已经更新，页面也已经重新渲染完毕。你可以在这个阶段做一些需要最新数据的操作，比如更新一些在页面上显示的内容。</li>
</ul>
</li>
<li>
<p><strong>beforeDestroy（销毁前）</strong>：</p>
<ul>
<li>当你要销毁 Vue 实例之前调用。你可以在这里做一些清理工作，比如取消定时器、移除绑定的事件等。</li>
</ul>
</li>
<li>
<p><strong>destroyed（销毁后）</strong>：</p>
<ul>
<li>Vue 实例已经被销毁了，这时候你的 Vue 实例上的所有东西都被清理掉了。你可以在这里做一些最后的清理工作，确保你的组件在销毁时没有留下任何垃圾。</li>
</ul>
</li>
</ol>
<p>这些生命周期函数钩子的调用顺序是这样的：</p>
<ul>
<li>创建阶段：<code>beforeCreate</code> -&gt; <code>created</code></li>
<li>更新阶段：<code>beforeUpdate</code> -&gt; <code>updated</code></li>
<li>销毁阶段：<code>beforeDestroy</code> -&gt; <code>destroyed</code></li>
</ul>
<h3 id="vue3生命周期">vue3生命周期<a class="anchor" href="#vue3生命周期">·</a></h3>
<p><strong>创建</strong></p>
<p>vue3的创建阶段已经包含在了<code>setup</code>函数中，所以可以直接在<code>setup</code>进行打印输出查看。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">&lt;</span><span style="color: #E1E4E8">script setup lang</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> name</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">&quot;Person&quot;</span><span style="color: #F97583">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;创建&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">&lt;/</span><span style="color: #E1E4E8">script</span><span style="color: #F97583">&gt;</span></span></code></pre></div></div></figure>
<p><strong>挂载</strong></p>
<p>首先引入，其实就是vue2中的<code>beforeMount</code>前面加了个<strong>on</strong>，然后<strong>B</strong>大写了。挂载完毕也同样是。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {onBeforeMount,onMounted} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span></code></pre></div></div></figure>
<p>vue3在挂在会会调用<code>onBeforeMount</code>函数所<strong>指定的函数</strong>，所以需要传入一个回调函数。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 挂载前</span></span>
<span class="line"><span style="color: #B392F0">onBeforeMount</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;挂载前&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"><span style="color: #6A737D">// 挂载完毕</span></span>
<span class="line"><span style="color: #B392F0">onMounted</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;挂载后&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>在父子组件中都有<strong>挂载</strong>函数时，子组件先挂载完毕。</p>
<p><strong>更新</strong></p>
<p>跟之前同样，也是<strong>前面+on</strong></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {onBeforeUpdate,onUpdated} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span></code></pre></div></div></figure>
<p>同样原理。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 更新前</span></span>
<span class="line"><span style="color: #B392F0">onBeforeUpdate</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;更新前&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"><span style="color: #6A737D">// 更新完毕</span></span>
<span class="line"><span style="color: #B392F0">onUpdated</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;更新完毕&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p><strong>卸载</strong></p>
<p>在vue2中叫做<strong>销毁</strong>，但是在vue3中就叫<strong>卸载</strong></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {onBeforeUnmount,onUnmounted} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span></code></pre></div></div></figure>
<p>同样原理。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 卸载前</span></span>
<span class="line"><span style="color: #B392F0">onBeforeUnmount</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;卸载前&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"><span style="color: #6A737D">// 卸载完毕</span></span>
<span class="line"><span style="color: #B392F0">onUnmounted</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;卸载完毕&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>卸载的效果可以通过<code>v-if</code>或<code>v-show</code>来确定展示与否来测试。</p>
<h3 id="自定义hooks">自定义hooks<a class="anchor" href="#自定义hooks">·</a></h3>
<p><strong>使用axios来请求一个数据</strong></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">async</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">getData</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">try</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> result </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">await</span><span style="color: #E1E4E8"> axios.</span><span style="color: #B392F0">get</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;api地址&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">		List.</span><span style="color: #B392F0">push</span><span style="color: #E1E4E8">(result.data.message)</span></span>
<span class="line"><span style="color: #E1E4E8">	} </span><span style="color: #F97583">catch</span><span style="color: #E1E4E8"> (error) {</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">alert</span><span style="color: #E1E4E8">(error)</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<h4 id="async和await解析">async和await解析<a class="anchor" href="#async和await解析">·</a></h4>
<p>解析：这是一个名为 <code>getData</code> 的异步函数,主要用于从某个 API 地址获取数据。</p>
<p><code>async function getData() &#123; ... &#125;</code>  这是一个异步函数声明，<code>async</code>关键字表示这个函数会返回一个<code>Promise</code>对象。这意味着函数内部可以使用<code>await</code>关键字，它可以等待一个异步操作（如HTTP请求）完成，然后再继续执行。</p>
<p><code>try &#123; ... &#125; catch (error) &#123; ... &#125;</code>  <code>try</code>块用于捕获可能发生的异常。如果异步操作成功，代码将正常执行；如果发生错误，控制流将跳转到<code>catch</code>块来执行代码。</p>
<p><code>let result = await axios.get(&quot;api地址&quot;)</code> 这行代码是异步操作的核心，使用了 Axios 库发送一个 GET 请求到指定的 API 地址,并使用 <code>await</code> 暂停等待响应结果，直到HTTP请求完成。请求完成后，响应数据被赋值给变量<code>result</code>。</p>
<p><code>List.push(result.data.message)</code> 这一行将 API 响应数据中的 <code>message</code> 属性值添加到一个名为 <code>List</code> 的数组中。它将<code>result</code>对象中的<code>data</code>属性的<code>message</code>字段添加到<code>List</code>数组中。这通常用于将获取的数据存储起来，以便后续使用。</p>
<p><code>catch (error) &#123; alert(error) &#125;</code> 如果在执行 <code>axios.get</code> 时发生了错误,就会执行 <code>catch</code> 代码块中的语句,这里是使用 <code>alert</code> 函数在浏览器中弹出一个警告框,显示错误信息。<code>error</code>变量将包含错误信息。</p>
<hr>
<p><strong>hooks的功能就是，让一个功能数据、方法都贴在一起，从而方便阅读。</strong></p>
<p>一般是以<code>useXXX</code>来命名，比如<code>useOrder</code>、<code>useSum</code>。</p>
<p>具体就是新建一个hooks文件夹，然后把每一个<strong>函数的功能</strong>以及<strong>所用到的数据</strong>，都放在这个以<code>useXXX</code>来命名的<code>.ts</code>文件里，代码正常写，但是需要默认导出，以及最后<code>return</code>一个值。</p>
<p><code>hooks/useOrder.ts</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 正常引用所需要的东西</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {reactive} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 最好默认导出</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">function</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 数据</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 方法</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 钩子</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 计算属性</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 向外部提供东西，一般是数据、方法等。</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> {orderList,getOrder}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p><strong>然后在原文件中进行调用</strong></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 首先引入，多个的话就挨个引入多个</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> useOrder </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;@/hooks/useOrder&#39;</span></span></code></pre></div></div></figure>
<p>因为hooks的本质就是一个一个可以调用的函数，所以可以直接解构，因为<code>useOrder</code>是有返回值的。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> {</span><span style="color: #79B8FF">orderList</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">getOrder</span><span style="color: #E1E4E8">} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useOrder</span><span style="color: #E1E4E8">()</span></span></code></pre></div></div></figure>
<p>这样写的好处在于，方便维护，假如以后要维护这个订单相关的代码，那么只需要维护好这个订单hooks就好了。</p>
<p>因为有了hooks，那么compositionAPI才发挥出了真正的威力。</p>
<h2 id="路由">路由<a class="anchor" href="#路由">·</a></h2>
<p>首先说明，站在程序员的角度，<strong>路由是路由，路由器是路由器。</strong></p>
<p>路由的英文名叫：<code>route</code>，路由器的英文名叫：<code>router</code>，带<code>r</code>的是路由器，不带的是路由，这两个有很大的区别。</p>
<p><strong>路由就是一组key-value的对应关系</strong>，多个路由需要经过<strong>路由器</strong>的管理，一般在SPA应用上比较多。</p>
<p>SPA应用简单来说就类似于<strong>后台管理系统</strong>的那种单页面切换。</p>
<p>路由有一个核心的东西就是路径在变<code>localhost:8080/xxx</code>。</p>
<hr>
<p><strong>学习路由使用步骤</strong></p>
<ol>
<li>导航区、展示区</li>
<li>请来路由器</li>
</ol>
<p><strong>安装路由</strong></p>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">i</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">vue-router</span></span></code></pre></div></div></figure>
<p>涉及到路由，就必须有<code>router</code>这个文件夹，因为我们使用标准文件划分，并且指定制定路由事要想好路由器的工作模式。</p>
<p>Vue Router 提供了两种路由模式：<code>history</code> 和 <code>hash</code>。这两种模式主要区别在于 URL 的显示方式和浏览器历史记录的管理方式。</p>
<ol>
<li>
<p><strong>Hash 模式(哈希模式)</strong>：在这种模式下，URL 中会包含一个 <code>#</code> 符号，例如 <code>http://example.com/#/home</code>。这个 <code>#</code> 后面的部分（hash）不会发送到服务器，它只是客户端用来跟踪应用状态的一种方式。当用户点击浏览器的后退按钮时，应用会根据 URL 中的 hash 值来显示相应的视图。<code>createWebHashHistory</code></p>
</li>
<li>
<p><strong>History 模式</strong>：这种模式提供了一种更自然的 URL 体验，没有 <code>#</code> 符号，例如 <code>http://example.com/home</code>。在这种模式下，Vue Router 会利用 HTML5 History API 来实现干净的 URL。这意味着 URL 的变化会被浏览器记录在历史记录中，用户可以使用浏览器的前进和后退按钮来导航应用的不同视图。<code>createWebHistory</code></p>
</li>
</ol>
<p><code>router/index.ts</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 创建一个路由并且暴露出去</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 第一步：引入createRouter</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {createRouter,createWebHistory} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #6A737D">// 引入一些可能要呈现的组件</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> Home </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;@/components/Home.vue&#39;</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> News </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;@/components/News.vue&#39;</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> About </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;@/components/About.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 第二步：创建路由器,一个路由器可以管理多个路由</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">router</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">createRouter</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 路由器工作模式 告诉vueRouter 使用history模式</span></span>
<span class="line"><span style="color: #E1E4E8">	history:</span><span style="color: #B392F0">createWebHistory</span><span style="color: #E1E4E8">(),</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 写一个名为routes的配置项</span></span>
<span class="line"><span style="color: #E1E4E8">	routes:[</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			path:</span><span style="color: #9ECBFF">&#39;/home&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			component:Home</span></span>
<span class="line"><span style="color: #E1E4E8">		},</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			path:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			component:News</span></span>
<span class="line"><span style="color: #E1E4E8">		},</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			path:</span><span style="color: #9ECBFF">&#39;/about&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			component:About</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	]</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 最后暴露出去router</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> router</span></span></code></pre></div></div></figure>
<p>然后回到<code>main.ts</code>中去引用路由</p>
<p><code>src/main.ts</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// import ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 文件名为index可以省略</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> router </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;./router&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 使用路由器</span></span>
<span class="line"><span style="color: #E1E4E8">app.</span><span style="color: #B392F0">use</span><span style="color: #E1E4E8">(router)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 挂载整个应用到app容器中</span></span>
<span class="line"><span style="color: #E1E4E8">app.</span><span style="color: #B392F0">mount</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;#app&#39;</span><span style="color: #E1E4E8">)</span></span></code></pre></div></div></figure>
<p>此时配置完毕以后，就已经用拥有了路由环境。</p>
<p>展示文件，<code>RouterView</code>用于展示文件，<code>RouterLink</code>用于切换文件。</p>
<p><code>RouterView</code>会自动把切换到的<code>.vue</code>文件进行展示。</p>
<p><code>RouterLink</code>  用于切换，其中</p>
<p><code>to=&quot;/xxx&quot;</code> 用于写切换路径</p>
<p><code>active-class=&quot;css样式&quot;</code> 表示被激活时候的类名，加上一个css样式，然后点击别的时候会自动去掉。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;app&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;title&quot;</span><span style="color: #E1E4E8">&gt;Vue路由测试&lt;/</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">&lt;!-- 导航区 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;navigate&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #79B8FF">RouterLink</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/home&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">active-class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;active&quot;</span><span style="color: #E1E4E8">&gt;首页&lt;/</span><span style="color: #79B8FF">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #79B8FF">RouterLink</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/news&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">active-class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;active&quot;</span><span style="color: #E1E4E8">&gt;新闻&lt;/</span><span style="color: #79B8FF">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #79B8FF">RouterLink</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/about&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">active-class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;active&quot;</span><span style="color: #E1E4E8">&gt;关于&lt;/</span><span style="color: #79B8FF">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">&lt;!-- 展示区 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;main-content&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #79B8FF">RouterView</span><span style="color: #E1E4E8">&gt;&lt;/</span><span style="color: #79B8FF">RouterView</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;App&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {RouterLink,RouterView} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue-router&#39;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h3 id="两个注意点">两个注意点<a class="anchor" href="#两个注意点">·</a></h3>
<ol>
<li>
<p>路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p>
<p>路由组件：靠路由规则渲染出来的,比如以下这是三个，一般是放在<code>pages</code> 或 <code>views</code>文件夹里(视图)。</p>
</li>
</ol>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">routes</span><span style="color: #E1E4E8">:[</span></span>
<span class="line"><span style="color: #E1E4E8">	{</span></span>
<span class="line"><span style="color: #E1E4E8">		path:</span><span style="color: #9ECBFF">&#39;/home&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		component:Home</span></span>
<span class="line"><span style="color: #E1E4E8">	},</span></span>
<span class="line"><span style="color: #E1E4E8">	{</span></span>
<span class="line"><span style="color: #E1E4E8">		path:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		component:News</span></span>
<span class="line"><span style="color: #E1E4E8">	},</span></span>
<span class="line"><span style="color: #E1E4E8">	{</span></span>
<span class="line"><span style="color: #E1E4E8">		path:</span><span style="color: #9ECBFF">&#39;/about&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		component:About</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">]</span></span></code></pre></div></div></figure>
<pre><code>一般组件：自己动手写出来的组件例如：&lt;Demo/&gt;
</code></pre>
<ol start="2">
<li>通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</li>
</ol>
<p>components组合成为view，一个页面(page)由多个view组合(例如导航栏、显示区等)而成。</p>
<h3 id="路由器工作模式">路由器工作模式<a class="anchor" href="#路由器工作模式">·</a></h3>
<ol>
<li>
<p><code>history</code>模式</p>
<blockquote>
<p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p>
<p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p>
</blockquote>
<p><code>history:createWebHistory()</code></p>
</li>
<li>
<p><code>hash</code>模式</p>
<blockquote>
<p>优点：兼容性更好，因为不需要服务器端处理路径。</p>
<p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p>
</blockquote>
<p><code>history:createWebHashHistory()</code></p>
</li>
</ol>
<h3 id="to的两种写法">to的两种写法<a class="anchor" href="#to的两种写法">·</a></h3>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">&lt;!-- 第一种：to的字符串写法 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">active-class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;active&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/home&quot;</span><span style="color: #E1E4E8">&gt;主页&lt;/</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">&lt;!-- 第二种：to的对象写法 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">active-class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;active&quot;</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">{</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/home&#39;</span><span style="color: #E1E4E8">}</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;Home&lt;/</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h3 id="命名路由">命名路由<a class="anchor" href="#命名路由">·</a></h3>
<p>作用：可以简化路由跳转及传参。</p>
<p>给路由规则命名：</p>
<figure class="shiki js"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">routes</span><span style="color: #E1E4E8">:[</span></span>
<span class="line"><span style="color: #E1E4E8">  {</span></span>
<span class="line"><span style="color: #E1E4E8">    name:</span><span style="color: #9ECBFF">&#39;zhuye&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    path:</span><span style="color: #9ECBFF">&#39;/home&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    component:Home</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  {</span></span>
<span class="line"><span style="color: #E1E4E8">    name:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    path:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    component:News,</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  {</span></span>
<span class="line"><span style="color: #E1E4E8">    name:</span><span style="color: #9ECBFF">&#39;guanyu&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    path:</span><span style="color: #9ECBFF">&#39;/about&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    component:About</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">]</span></span></code></pre></div></div></figure>
<p>跳转路由：</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/news/detail&quot;</span><span style="color: #E1E4E8">&gt;跳转&lt;/</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">{</span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;guanyu&#39;</span><span style="color: #E1E4E8">}</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;跳转&lt;/</span><span style="color: #85E89D">router-link</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h3 id="嵌套路由">嵌套路由<a class="anchor" href="#嵌套路由">·</a></h3>
<p>增加一个<code>children</code>，注意里面的path路径是不需要加<code>/</code>的。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">router</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">createRouter</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">	history: </span><span style="color: #B392F0">createWebHistory</span><span style="color: #E1E4E8">(),</span></span>
<span class="line"><span style="color: #E1E4E8">	routes:[</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8">		},</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			name:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			path:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			component:News,</span></span>
<span class="line"><span style="color: #E1E4E8">			children:[</span></span>
<span class="line"><span style="color: #E1E4E8">				name:</span><span style="color: #9ECBFF">&#39;xinwenneirong&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">				path:</span><span style="color: #9ECBFF">&#39;detail&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">				component:Detail</span></span>
<span class="line"><span style="color: #E1E4E8">			]</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	]</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>在使用<code>RouterLink</code>跳转时，<code>to</code>的路径要写完整。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">Router-Link</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/news/detail&quot;</span><span style="color: #E1E4E8">&gt;xxxx&lt;/</span><span style="color: #85E89D">Router-Link</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #6A737D">&lt;!-- 或 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">Router-Link</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">{</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/news/detail&#39;</span><span style="color: #E1E4E8">}</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;xxxx&lt;/</span><span style="color: #85E89D">Router-Link</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p><strong>一般组件用大驼峰，参数等命名用小驼峰。</strong></p>
<h3 id="路由传参">路由传参<a class="anchor" href="#路由传参">·</a></h3>
<p>如果数据在父组件上，但是子组件需要展示，通过父组件向子组件传递参数方式有两种。</p>
<h4 id="1-query参数">1.<strong>query参数</strong><a class="anchor" href="#1-query参数">·</a></h4>
<p>前情提要：<code>News.vue</code>是父组件，<code>Detail.vue</code>是子组件，父组件通过<code>v-for</code>来渲染新闻标题。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">ul</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;li v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot;&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;RouterLink&gt;&lt;/RouterLink&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;/li&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">ul</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p><strong>步骤一</strong>：</p>
<p>父组件<code>News.vue</code> 在<code>to</code>地址的同时传入参数，写法如下</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">Router-Link</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/news/detail?a=1&amp;b=2&amp;c=3&quot;</span><span style="color: #E1E4E8">&gt;xxxx&lt;/</span><span style="color: #85E89D">Router-Link</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>此时传递了三个参数<code>a,b,c</code>，多个参数使用<code>&amp;</code>隔开，这传入的是死数据，而且只是一个字符串。</p>
<p>所以要写成<strong>模板字符串</strong>，模版字符串则是在双引号<code>&quot;&quot;</code>里加上两个撇号，<strong>模版字符串</strong>里面嵌入<code>JS</code>可以通过<code>$&#123;&#125;</code>来实现，并且要把<code>to</code>变成<code>:to</code>。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;`/news/detail?id=${</span><span style="color: #E1E4E8">news</span><span style="color: #9ECBFF">.</span><span style="color: #E1E4E8">id</span><span style="color: #9ECBFF">}&amp;title=${</span><span style="color: #E1E4E8">news</span><span style="color: #9ECBFF">.</span><span style="color: #E1E4E8">title</span><span style="color: #9ECBFF">}&amp;content=${</span><span style="color: #E1E4E8">news</span><span style="color: #9ECBFF">.</span><span style="color: #E1E4E8">content</span><span style="color: #9ECBFF">}`&quot;</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>上述写法，一大长串儿，显得很不美观有点冗余，所以我们可以美化一下代码。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">RouterLink</span></span>
<span class="line"><span style="color: #E1E4E8">	:</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/news/detail&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">query</span><span style="color: #E1E4E8">:{</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">id</span><span style="color: #E1E4E8">:news.id,</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">title</span><span style="color: #E1E4E8">:news.title,</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">content</span><span style="color: #E1E4E8">:news.content</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span><span style="color: #9ECBFF">&quot;</span></span>
<span class="line"><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>这样就看起来比较美观，毕竟要做一个格式化工程师，如果在路由中定义了<code>name</code>参数，那么<code>path</code>路径可以换成<code>name</code>名称，更方便。</p>
<p><strong>步骤二</strong>：</p>
<p>子组件<code>Detail.vue</code>接收参数，需要引入<code>useRouter</code>，可以看出是一个<code>hooks</code>。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {useRoute} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue-router&#39;</span></span></code></pre></div></div></figure>
<p>通过定义一个数据来接收<code>useRouter</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> route </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useRoute</span><span style="color: #E1E4E8">()</span></span></code></pre></div></div></figure>
<p>如果你不知道<code>route</code>里面包含了什么可以通过打印来查看，返回的里面包含了一个<code>query</code>参数，这个参数里面包含了父组件传过来的值。</p>
<p>引用</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;id={{route.query.id}}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;title={{route.query.title}}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;content={{route.query.content}}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>如果解构赋值。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> route </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useRouter</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {query} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> route</span></span></code></pre></div></div></figure>
<p>重点：如果从响应式数据中直接解构属性，那么这个属性就会就此失去响应式，如果不想失去响应式，那么可以使用<code>toRefs</code>就不会失去了。调用也更加方便即：</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;id={{query.id}}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;title={{query.title}}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;content={{query.content}}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {toRefs} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> route </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useRouter</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {query} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">toRefs</span><span style="color: #E1E4E8">(router)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h4 id="2-params参数">2.<strong>params参数</strong><a class="anchor" href="#2-params参数">·</a></h4>
<p>首先是要在路由中配置占位符，使用<code>/:xxx</code>来进行占位符，占位符所对应的名称要和传入的参数名称相对应，在后面加上<code>?</code>该参数可有可无。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">router</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">createRouter</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">	history: </span><span style="color: #B392F0">createWebHistory</span><span style="color: #E1E4E8">(),</span></span>
<span class="line"><span style="color: #E1E4E8">	routes:[</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8">		},</span></span>
<span class="line"><span style="color: #E1E4E8">		{</span></span>
<span class="line"><span style="color: #E1E4E8">			name:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			path:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			component:News,</span></span>
<span class="line"><span style="color: #E1E4E8">			children:[</span></span>
<span class="line"><span style="color: #E1E4E8">				name:</span><span style="color: #9ECBFF">&#39;xinwenneirong&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">				</span><span style="color: #6A737D">// 后面加上?表示该参数可以没有值</span></span>
<span class="line"><span style="color: #E1E4E8">				path:</span><span style="color: #9ECBFF">&#39;detail/:id/:title/:content?&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">				component:Detail</span></span>
<span class="line"><span style="color: #E1E4E8">			]</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	]</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<ol>
<li>传递参数</li>
</ol>
<p>这里的跳转只可以使用<code>name</code>参数，不可以使用<code>path</code>，如果是<code>query</code>的话两个都可以</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">&lt;!-- 跳转并携带params参数（to的字符串写法） --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;`/news/detail/001/新闻001/内容001`&quot;</span><span style="color: #E1E4E8">&gt;{{news.title}}&lt;/</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">				</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8"> </span></span>
<span class="line"><span style="color: #E1E4E8">	:</span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	  </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">, </span><span style="color: #6A737D">//用name跳转</span></span>
<span class="line"><span style="color: #E1E4E8">	  </span><span style="color: #B392F0">params</span><span style="color: #E1E4E8">:{</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">id</span><span style="color: #E1E4E8">:news.id,</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">title</span><span style="color: #E1E4E8">:news.title,</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">content</span><span style="color: #E1E4E8">:news.content</span></span>
<span class="line"><span style="color: #E1E4E8">	  }</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span><span style="color: #9ECBFF">&quot;</span></span>
<span class="line"><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	{{news.title}}</span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;/</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<ol start="2">
<li>接收参数：</li>
</ol>
<figure class="shiki js"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {useRoute} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">route</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useRoute</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #6A737D">// 打印params参数</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(route.params)</span></span></code></pre></div></div></figure>
<blockquote>
<p>备注1：传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</p>
<p>备注2：传递<code>params</code>参数时，需要提前在规则中占位。</p>
</blockquote>
<h3 id="路由的props配置">路由的props配置<a class="anchor" href="#路由的props配置">·</a></h3>
<p>简单点就是可以获取值的时候不那么麻烦，响应式数据只写<code>&#123;&#123; xxx &#125;&#125;</code>这种语法是最棒的，所以我们就要用这种方法。</p>
<p><code>props</code>的功能可以这里么理解，当路由已经找到了并开始渲染<code>&lt;Detail /&gt;</code>组件时，如果我们开启了<code>props</code>。</p>
<p>那么我们使用<code>params</code>传递的三个参数就会进行转化为类似于组件传递值的方法，于是就变成了<code>&lt;Detail id=?? title=?? content=?? /&gt;</code>。</p>
<p>于是乎就特别简单了，这些<code>props</code>参数可以直接使用<code>defineProps</code>函数接收。</p>
<p><strong>第一种props</strong></p>
<p>第一种使用的是<code>params</code>来传递参数</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// router.ts</span></span>
<span class="line"><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">component</span><span style="color: #E1E4E8">:News,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">children</span><span style="color: #E1E4E8">:[</span></span>
<span class="line"><span style="color: #E1E4E8">		name:</span><span style="color: #9ECBFF">&#39;xinwenneirong&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// 后面加上?表示该参数可以没有值</span></span>
<span class="line"><span style="color: #E1E4E8">		path:</span><span style="color: #9ECBFF">&#39;detail/:id/:title/:content?&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		component:Detail,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// 第一种写法：将路由收到的所有params参数座位props传给路由组件</span></span>
<span class="line"><span style="color: #E1E4E8">		props:</span><span style="color: #79B8FF">true</span></span>
<span class="line"><span style="color: #E1E4E8">	]</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">// Detail.vue</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;编号：{{ id }}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;标题：{{ title }}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;内容：{{ content }}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">templat</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;detail&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	defineProps([&#39;id&#39;,&#39;title&#39;,&#39;content&#39;])</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>这就叫优雅的代码！！！（但是这个只能和<code>params</code>参数进行配合，如果是<code>query</code>就不行了），所以我们可以使用第二种<code>props</code>写法，<strong>函数写法</strong>。</p>
<p><strong>第二种props</strong></p>
<p>使用<code>query</code>传递参数</p>
<p>如果使用的是<code>query</code>来传值，那么只能用这种办法，当然<code>params</code>也同样适用，但是<code>params</code>可以直接使用第一种更加方便。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// router.ts</span></span>
<span class="line"><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">component</span><span style="color: #E1E4E8">:News,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">children</span><span style="color: #E1E4E8">:[</span></span>
<span class="line"><span style="color: #E1E4E8">		name:</span><span style="color: #9ECBFF">&#39;xinwenneirong&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// 后面加上?表示该参数可以没有值</span></span>
<span class="line"><span style="color: #E1E4E8">		path:</span><span style="color: #9ECBFF">&#39;detail/:id/:title/:content?&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		component:Detail,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// 第二种写法：函数写法可以自己决定将什么作为props给路由组件</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">props</span><span style="color: #E1E4E8">(route) {</span></span>
<span class="line"><span style="color: #E1E4E8">			return route.query</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	]</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">// Detail.vue</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;编号：{{ id }}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;标题：{{ title }}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;内容：{{ content }}&lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">templat</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;detail&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	defineProps([&#39;id&#39;,&#39;title&#39;,&#39;content&#39;])</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>常用的就这两种，第三种是对象写法，就是传递固定的值，几乎不用。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// router.ts</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">children</span><span style="color: #E1E4E8">:[</span></span>
<span class="line"><span style="color: #E1E4E8">		name:</span><span style="color: #9ECBFF">&#39;xinwenneirong&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// 后面加上?表示该参数可以没有值</span></span>
<span class="line"><span style="color: #E1E4E8">		path:</span><span style="color: #9ECBFF">&#39;detail/:id/:title/:content?&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		component:Detail,</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">props</span><span style="color: #E1E4E8">(route) {</span></span>
<span class="line"><span style="color: #E1E4E8">			a:</span><span style="color: #79B8FF">100</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			b:</span><span style="color: #79B8FF">200</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">			c:</span><span style="color: #79B8FF">300</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	]</span></span></code></pre></div></div></figure>
<p>这些都是路由组件的传递方式，如果是一般组件(一般组件就是自己可以动手写在代码里的那么可以直接传递<code>props</code>，比如我们可以直接<code>&lt;Deatil a=1 b=2 c=3/&gt;</code>)。</p>
<h3 id="路由的replace属性">路由的replace属性<a class="anchor" href="#路由的replace属性">·</a></h3>
<p>路由的每次跳转都会形成历史记录，可以在浏览器的左上角的左右箭头进行前进后退，这是因为路由跳转默认是<code>push</code>模式，如果不想这样，那么可以改成<code>replace</code>模式，即不能前进也不能后退。</p>
<p>要改为<code>replace</code>，只需要在<code>RouterLink</code>标签中，加入<code>replace</code>属性即可。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">replace</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/home&quot;</span><span style="color: #E1E4E8">&gt;首页&lt;/</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">replace</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/news&quot;</span><span style="color: #E1E4E8">&gt;新闻&lt;/</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">replace</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">to</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;/about&quot;</span><span style="color: #E1E4E8">&gt;关于&lt;/</span><span style="color: #85E89D">RouterLink</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>如果想看到某一个具体的就不让他回去的话，那么就可以单独加上<code>replace</code>。</p>
<h3 id="编程式导航-重要">编程式导航(重要)<a class="anchor" href="#编程式导航-重要">·</a></h3>
<p>我们之前的跳转，全部使用了<code>&lt;RouterLink /&gt;</code>标签进行实现，那么<code>&lt;RouterLink /&gt;</code>标签在最后会被转化为<code>&lt;a/&gt;</code>标签，这就导致了，如果全部都使用，那么就会出现一堆<code>&lt;a/&gt;</code>元素。</p>
<p>所谓编程式导航，其实就是脱离<code>&lt;RouterLink /&gt;</code>来实现路由跳转。</p>
<p>打开页面3秒后跳转到新闻页面。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {onMounted} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #6A737D">// 注意是router 后面加了r</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {useRouter} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue-router&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 拿到router，相当于掌握了整个路由</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">router</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useRouter</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">onMounted</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">setTimeout</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">		router.</span><span style="color: #B392F0">push</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;/news&quot;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">	},</span><span style="color: #79B8FF">3000</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>编程式路由导航的使用频率要远大于<code>RouterLink</code>式。</p>
<p><code>router.push()</code>和<code>to</code>的语法是一样的，都有两个模式<strong>字符串</strong>和<strong>对象</strong>，而且语法一模一样，直接拿过来用就行，但是参数需要传递过来。</p>
<p>通过按钮点击来查看新内容，那么就可以直接把之前的<code>to</code>来拿用。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// ts会告诉你news参数有一个隐式any类型，简单方式就是后面直接加:any，不然就是使用interface来限制一下。</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">showNewsDeatil</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">news</span><span style="color: #F97583">:</span><span style="color: #79B8FF">any</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">	router.</span><span style="color: #B392F0">push</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">		name:</span><span style="color: #9ECBFF">&quot;xiang&quot;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		query:{</span></span>
<span class="line"><span style="color: #E1E4E8">			id:news.id,</span></span>
<span class="line"><span style="color: #E1E4E8">			title:news.title,</span></span>
<span class="line"><span style="color: #E1E4E8">			content:news.conten</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	})</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// or</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 限制有限制的好处，可以让数据更严谨</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">interface</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">NewInter</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #FFAB70">id</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #FFAB70">title</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #FFAB70">content</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">showNewsDeatil</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">news</span><span style="color: #F97583">:</span><span style="color: #B392F0">NewInter</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">	router.</span><span style="color: #B392F0">push</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">		name:</span><span style="color: #9ECBFF">&quot;xiang&quot;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		query:{</span></span>
<span class="line"><span style="color: #E1E4E8">			id:news.id,</span></span>
<span class="line"><span style="color: #E1E4E8">			title:news.title,</span></span>
<span class="line"><span style="color: #E1E4E8">			content:news.conten</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	})</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>当然了，如果不想使用<code>push</code>留下痕迹,可以直接<code>router.replace()</code>进行使用。</p>
<h3 id="路由重定向">路由重定向<a class="anchor" href="#路由重定向">·</a></h3>
<p>作用：将特定的路径，重新定向到已有路由。</p>
<p>我们想一打开页面就直接显示主页等想一开始就显示的内容，顺序不分先后。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// router.ts</span></span>
<span class="line"><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;xinwen&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/news&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">component</span><span style="color: #E1E4E8">:News</span></span>
<span class="line"><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">...</span></span>
<span class="line"><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">{  </span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">path</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/&#39;</span><span style="color: #E1E4E8">,  </span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">redirect</span><span style="color: #E1E4E8">:</span><span style="color: #9ECBFF">&#39;/home&#39;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>连续解构赋值+重命名写法</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {</span><span style="color: #FFAB70">data</span><span style="color: #E1E4E8">:{</span><span style="color: #FFAB70">content</span><span style="color: #E1E4E8">:title}}</span></span></code></pre></div></div></figure>
<p>↑返回的数据名叫<code>data</code>，需要从<code>data</code>中拿到<code>content</code>值，又把<code>content</code>名改为<code>title</code></p>
<h2 id="Pinia">Pinia<a class="anchor" href="#Pinia">·</a></h2>
<p>官网：<a target="_blank" rel="noopener" href="https://pinia.vuejs.org/zh/">Pinia | The intuitive store for Vue.js (vuejs.org)</a></p>
<p>官方描述为：符合直觉的Vue.js状态管理哭，说白了就是用着很舒服，没有vuex那么臃肿。</p>
<p>集中式状态管理也叫集中式数据管理，常见的有：react的redux，vue2的vuex，vue3的pinia。</p>
<p>hooks的作用只是把代码集中在一起，而pinia是各个组件之间共享数据。</p>
<h3 id="搭建Pinia环境">搭建Pinia环境<a class="anchor" href="#搭建Pinia环境">·</a></h3>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">i</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">pinia</span></span></code></pre></div></div></figure>
<p>引入Pinia</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// src/main.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 导入Vue</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { createApp } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #6A737D">// 导入App组件</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> App </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;./App.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 1.引入pinia</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {createPinia} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 2.创建pinia</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">pinia</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">createPinia</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 3.安装pinia</span></span>
<span class="line"><span style="color: #E1E4E8">app.</span><span style="color: #B392F0">use</span><span style="color: #E1E4E8">(pinia)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 创建Vue应用实例</span></span>
<span class="line"><span style="color: #B392F0">createApp</span><span style="color: #E1E4E8">(App).</span><span style="color: #B392F0">mount</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;#app&#39;</span><span style="color: #E1E4E8">)</span></span></code></pre></div></div></figure>
<h3 id="存储数据-读取数据">存储数据+读取数据<a class="anchor" href="#存储数据-读取数据">·</a></h3>
<p>首先<code>src</code>目录下必须有<code>store</code>文件夹，pinia具体就体现在这里。</p>
<p>里面的文件命名一般是和组件相对应的，比如我们有一个<code>count.vue</code>组件，那我们可以创建一个<code>store/count.ts</code>文件，可以把这个文件看做是一个<strong>小仓库</strong>。</p>
<p><code>Pinia</code>官方鼓励我们使用类似<code>hooks</code>的方式命名，所以我们可以命名为<code>useCountStore</code>，引入<code>defineStore</code>，它的第一个参数建议和组件名相同<code>count</code>，然后在第二个参数就是开始配置。</p>
<p><code>state</code>要求要写成一个函数，并且要<code>return</code>一个对象，可以是<strong>字符串</strong>也可以是<strong>对象</strong>，我们这里把<code>sum</code>进行共享，并默认值设为<code>6</code>。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {defineStore} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> const useCountStore </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineStore</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;count&#39;</span><span style="color: #E1E4E8">,{</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 真正存储数据的地方</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">state</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #FFAB70">return</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #FFAB70">sum</span><span style="color: #E1E4E8">:</span><span style="color: #79B8FF">6</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	})</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p><code>count.vue</code>中不需要定义<code>sum</code>，我们直接引入提到的<strong>小仓库</strong>，只要看到引入的目录中带<code>store</code>，那就是引用了<code>pinia</code>。</p>
<p>这里有值得注意的一点，如果是自己动手写定义的<code>ref</code>属性，那么在使用的时候是必要<code>.value</code>的。</p>
<p>但是如果是在<code>reactive</code>里面定义的<code>ref</code>，会自动<strong>拆包</strong>，也就是不需要<code>.value</code>了，</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 引入countStore</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { useCountStore } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;@/store/count&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 使用useCountStore，得到一个专门保存count相关的store</span></span>
<span class="line"><span style="color: #E1E4E8">conts countStore </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useConutStore</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 以下这两种方式都可以拿到state中的数据</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;输出&#39;</span><span style="color: #E1E4E8">,countStore.sum)</span></span>
<span class="line"><span style="color: #6A737D">// 输出 6</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;输出&#39;</span><span style="color: #E1E4E8">,countStore.$state.sum)</span></span>
<span class="line"><span style="color: #6A737D">// 输出 6</span></span></code></pre></div></div></figure>
<p>我们现在已经拿到了<code>sum</code>的值，就可以直接正常使用了，并且数据也是共享的。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;求和结果：{{ countStore.sum }}&lt;/</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h3 id="修改数据三种方式">修改数据三种方式<a class="anchor" href="#修改数据三种方式">·</a></h3>
<p><strong>Pinia是支持直接把数据拿过来就修改的</strong>，<strong>符合直觉</strong>。</p>
<p><strong>第一种修改方式</strong>，直接修改，比如我们要修改<code>sum</code>。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">add</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	countStore.sum </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>对，就是这么简单暴力，可以直接拿来用，这个在<code>vuex</code>中是不可以的。</p>
<p><strong>第二种修改方式</strong>，使用<code>$patch</code>函数修改。</p>
<p><code>$patch</code>是一个实用函数,用于直接修改状态对象(state)的一个或多个属性，属于<strong>批量变更</strong>，它的好处是执行一次就可以修改多个参数。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">modify</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">	countStore.</span><span style="color: #B392F0">$patch</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">		sum:</span><span style="color: #79B8FF">10</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		name:</span><span style="color: #9ECBFF">&#39;张三&#39;</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">		address:</span><span style="color: #9ECBFF">&#39;北京&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">	})</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>如果是多个值需要同时发生变化，就推荐使用<code>$patch</code>，可以达到占用最少的资源。</p>
<p><strong>第三种修改方式</strong>  actions</p>
<p>借助<code>actions</code>实现（<code>actions</code>中可以编写一些业务逻辑）。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { defineStore } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">useCountStore</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineStore</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;count&#39;</span><span style="color: #E1E4E8">, {</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">//actions里面放的是一个一个的方法，用于响应组件中的&quot;动作&quot;(加减都是动作)</span></span>
<span class="line"><span style="color: #E1E4E8">  actions: {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">//加操作</span></span>
<span class="line"><span style="color: #E1E4E8">    </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 这里设定一个number类型的参数来接收传过来的数值</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">increment</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">value</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">) {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 操作state里面的数据可以直接使用this</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// this就是当前的store，所以当前这个store里面的东西全都有</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 限制加到10不能加了</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #F97583">if</span><span style="color: #E1E4E8"> (</span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.sum </span><span style="color: #F97583">&lt;</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">10</span><span style="color: #E1E4E8">) {</span></span>
<span class="line"><span style="color: #E1E4E8">       </span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #6A737D">//操作countStore中的sum</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.sum </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> value</span></span>
<span class="line"><span style="color: #E1E4E8">      }</span></span>
<span class="line"><span style="color: #E1E4E8">    },</span></span>
<span class="line"><span style="color: #E1E4E8">    </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 减操作</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">decrement</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">value</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #F97583">if</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.sum </span><span style="color: #F97583">&gt;</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.sum </span><span style="color: #F97583">-=</span><span style="color: #E1E4E8"> value</span></span>
<span class="line"><span style="color: #E1E4E8">      }</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">/*************/</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>组件中调用<code>actions</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 使用countStore</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">countStore</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useCountStore</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 调用对应action，加并且传入加的数值</span></span>
<span class="line"><span style="color: #E1E4E8">countStore.</span><span style="color: #B392F0">incrementOdd</span><span style="color: #E1E4E8">(n.value)</span></span></code></pre></div></div></figure>
<p>这里的<code>actions</code>感觉看起来好像就是正常的操作，还不如第一种来的实在，因为<code>actions</code>可以完成的在第一种都可以完成，但是<code>actions</code>中的业务逻辑，是可以进行<strong>复用</strong>的，所以也很有意义。</p>
<h3 id="storeToRefs">storeToRefs<a class="anchor" href="#storeToRefs">·</a></h3>
<p>这里想让你在读数据的时候更加优雅一些。</p>
<p>因为我们以上的操作在读取响应式数据的时候都是<code>countStore.sum</code>等等前面都带一个<code>countStore</code>，一点儿也不优雅，所以我们可以让他更优雅一些。</p>
<p>可能会想到，直接解构数据就好咯，但是这样不行，这样会导致数据就此丢失响应式，那么又想一下，引入一个<code>toRefs</code>来包裹一下不就好了，确实可以，而且也可以正常运营，但是代价很大。</p>
<p>因为他会把你的<code>store</code>中的所有数据，包括函数什么的，全部都变成<code>ref</code>响应式数据，我们其实只需要数据罢了，所以不要用<code>toRefs</code>，这样不好。</p>
<p>但是要解决这个问题也很简单，<code>Pinia</code>也考虑到了这个问题，所以提供了<code>storeToRefs</code>，大白话直说：这个只会把<code>store</code>中的数据变成响应式数据给你。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {storeToRefs} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> {</span><span style="color: #79B8FF">sum</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">name</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">address</span><span style="color: #E1E4E8">} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">storeToRefs</span><span style="color: #E1E4E8">(</span><span style="color: #B392F0">useCountStore</span><span style="color: #E1E4E8">())</span></span></code></pre></div></div></figure>
<h3 id="geeters">geeters<a class="anchor" href="#geeters">·</a></h3>
<p><code>geeters</code>和<code>state</code>、<code>actions</code>都是 兄弟，所以他们都是同级，<code>geeters</code>里面是写函数的，而且必须返回一个值，就相当于计算属性。</p>
<p>在<code>geeters</code>里面定义的函数，都有一个参数叫<code>state</code>，所以在<code>getters</code>中可以直接通过这个参数来调用<code>state</code>中的数据，也可以直接使用<code>this</code>，不用<code>this</code>可以直接写成箭头函数。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 引入defineStore用于创建store</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {defineStore} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 定义并暴露一个store</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">useCountStore</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineStore</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;count&#39;</span><span style="color: #E1E4E8">,{</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 动作</span></span>
<span class="line"><span style="color: #E1E4E8">  actions:{</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">/************/</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 状态</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">state</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">      sum:</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">      school:</span><span style="color: #9ECBFF">&#39;nihao&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 计算 </span></span>
<span class="line"><span style="color: #E1E4E8">  getters:{</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 第一种写法</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">bigAdd</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">state</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> state.sum </span><span style="color: #F97583">+</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">10</span></span>
<span class="line"><span style="color: #E1E4E8">	},</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 第二种写法 箭头函数形式</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">bigSum</span><span style="color: #E1E4E8">:(</span><span style="color: #FFAB70">state</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> state.sum </span><span style="color: #F97583">*</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">10</span><span style="color: #E1E4E8">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 将state中的school变成默认大写</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 后面的:string 就是声明是字符串类型，这是ts的检查不然就默认any</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">upperSchool</span><span style="color: #E1E4E8">()</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.school.</span><span style="color: #B392F0">toUpperCase</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>这里的计算属性，同样是<strong>和响应式数据一样</strong>，可以拿来<strong>直接使用</strong>，并且也是可以直接<strong>解构</strong>出来进行使用。</p>
<h3 id="subscribe-订阅的使用">$subscribe 订阅的使用<a class="anchor" href="#subscribe-订阅的使用">·</a></h3>
<p>每个<code>store</code>中都有<code>$subscribe</code>函数，类似于<code>watch</code>监视。可以直接调用，并且要传入一个函数，如果你不需要用<code>this</code>那么你可以使用<strong>箭头函数</strong>，<strong>官方文档使用的是箭头函数</strong>。</p>
<p>那么<code>$subscribe</code>的主要作用是，当<code>store</code>中的数据发生了变化以后，就会调用。</p>
<p>它收到两个参数，<code>mutate</code>修改前的数据， <code>state</code>修改后的数据，<code>state</code>使用频率是最多的。</p>
<p>我们可以把state中的修改后的数据存入浏览器中</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">countStore.</span><span style="color: #B392F0">$subscribe</span><span style="color: #E1E4E8">((</span><span style="color: #FFAB70">mutate</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">state</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">  localStorage.</span><span style="color: #B392F0">setItem</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&quot;countList&quot;</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">JSON</span><span style="color: #E1E4E8">.</span><span style="color: #B392F0">stringify</span><span style="color: #E1E4E8">(state.countList))</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p><code>JSON.stringify</code>：用于把内容转化为字符串。<code>JSON.parse</code>：用于把字符串转回来。</p>
<p>此时我们的数据可以这样定义</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// store/count.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {defineStore} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> const useCountStore </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineStore</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;count&#39;</span><span style="color: #E1E4E8">,{</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 真正存储数据的地方</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #B392F0">state</span><span style="color: #E1E4E8">({</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #FFAB70">return</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// as string进行断言，保证严谨性</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 这里后面的 或 ||[] 是为了避免第一次运行local storage中没有数据，然后导致错误，所以要加上。</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #FFAB70">countList</span><span style="color: #E1E4E8">:</span><span style="color: #FFAB70">JSON</span><span style="color: #E1E4E8">.</span><span style="color: #FFAB70">parse</span><span style="color: #E1E4E8">(localStorage.</span><span style="color: #B392F0">getItem</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;countList&#39;</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">as</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">) || []</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	})</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<h3 id="store的组合式写法">store的组合式写法<a class="anchor" href="#store的组合式写法">·</a></h3>
<p>我们之前写的，属于是选项式写法，比如<code>actions</code>和<code>state</code>都是写在了一个对象里，我们把<code>defineStore</code>的第二个参数写成<strong>箭头函数</strong>，就可以使用组合式<code>store</code>了，但是记住<strong>箭头函数</strong>中不可以使用<code>this</code>。</p>
<p>组合式<code>store</code>例子，你就把他当做一个<code>setup</code>函数就可以了。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// store/count.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {defineStore} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;pinia&#39;</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> axios </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;axios&#39;</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {nanoid} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;nanoid&#39;</span></span>
<span class="line"><span style="color: #6A737D">// 直接引入</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {reactive} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 这里第二个参数使用箭头函数形式</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> const useCountStore </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineStore</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;count&#39;</span><span style="color: #E1E4E8">,()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// countList就相当于state，可以定义多个。</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">countList</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">JSON</span><span style="color: #E1E4E8">.</span><span style="color: #B392F0">parse</span><span style="color: #E1E4E8">(localStorage.</span><span style="color: #B392F0">getItem</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;countList&#39;</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">as</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">) </span><span style="color: #F97583">||</span><span style="color: #E1E4E8"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// getCount 相当于 actions</span></span>
<span class="line"><span style="color: #F97583">async</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">getCount</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 发请求，这个写法是连续解构赋值+重命名</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {</span><span style="color: #FFAB70">date</span><span style="color: #E1E4E8">:{</span><span style="color: #FFAB70">content</span><span style="color: #E1E4E8">:title}} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">await</span><span style="color: #E1E4E8"> axios.</span><span style="color: #B392F0">get</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;api&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 把请求回来的字符串包装成一个对象</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> obj </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> {id:</span><span style="color: #B392F0">nanoid</span><span style="color: #E1E4E8">(),title}</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 放入数组中</span></span>
<span class="line"><span style="color: #E1E4E8">	countList.</span><span style="color: #B392F0">unshift</span><span style="color: #E1E4E8">(obj)</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 不要忘记return返回值。</span></span>
<span class="line"><span style="color: #F97583">return</span><span style="color: #E1E4E8"> {countList,getCount}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<h2 id="组件通信">组件通信<a class="anchor" href="#组件通信">·</a></h2>
<p>组件通信就是组件之间互相传递数据，这个玩的6很重要。</p>
<h3 id="props-2">props<a class="anchor" href="#props-2">·</a></h3>
<p><code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p>
<ul>
<li>
<p>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>，就是字符串、数字之类的。</p>
</li>
<li>
<p>若 <strong>子传父</strong>：属性值是<strong>函数</strong>，父先给子函数，子在调用传值。</p>
</li>
</ul>
<p>父组件：</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;father&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;父组件，&lt;/</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;我的车：{{ car }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;儿子给的玩具：{{ toy }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">        // 在子组件中使用 :传递名=&quot;传递数据&quot;，这些名字都是可以任意取的没有限制，但是最好还是容易理解一些</span></span>
<span class="line"><span style="color: #E1E4E8">        // </span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #79B8FF">Child</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">car</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">car</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">sendToy</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">getToy</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">/&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;Father&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> Child </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;./Child.vue&#39;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { ref } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 数据  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">car</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;奔驰&#39;</span><span style="color: #E1E4E8">)  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 定义一个用来接收子组件传过来的数据</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">toy</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">()  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 方法  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 定义一个方法来接收子组件传过来的数据</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">getToy</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">value</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">){  </span></span>
<span class="line"><span style="color: #E1E4E8">	    </span><span style="color: #6A737D">// value的值就是子传过来的值，然后接收就行了</span></span>
<span class="line"><span style="color: #E1E4E8">        toy.value </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> value  </span></span>
<span class="line"><span style="color: #E1E4E8">    }  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>子组件</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;child&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;子组件&lt;/</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;我的玩具：{{ toy }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;父给我的车：{{ car }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">        // 这里因为defineProps已经拿到了getToy所以可以直接使用，然后把玩具给传入进去，父组件那边正好可以接收。</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8"> @</span><span style="color: #B392F0">click</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #B392F0">getToy</span><span style="color: #E1E4E8">(toy)</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;玩具给父亲&lt;/</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;Child&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { ref } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">toy</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;奥特曼&#39;</span><span style="color: #E1E4E8">)  </span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #6A737D">// 声明接收的数据使用defineProps 无需引入，接收完了之后可以直接拿来使用</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #B392F0">defineProps</span><span style="color: #E1E4E8">([</span><span style="color: #9ECBFF">&#39;car&#39;</span><span style="color: #E1E4E8">,</span><span style="color: #9ECBFF">&#39;getToy&#39;</span><span style="color: #E1E4E8">])  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>父传子，比较容易理解，直接就可以传到子组件中去。</p>
<p>但子传父，就需要父亲<strong>先</strong>给子传入一个函数，子收到这个函数，在调用这个函数的时候以<strong>传参</strong>的形式把值传递过去。</p>
<h3 id="自定义事件-custom-event">自定义事件 custom_event<a class="anchor" href="#自定义事件-custom-event">·</a></h3>
<p>当你定义函数的时候，有一个默认参数，这个参数就是<strong>事件对象</strong>，里边包含了很多事件，比如鼠标移动之类的坐标。</p>
<ol>
<li>
<p>概述：自定义事件常用于：<strong>子 传 父。</strong></p>
</li>
<li>
<p>注意区分好：原生事件、自定义事件。</p>
</li>
</ol>
<p>在定义<code>@click</code>点击事件的时候，传入<code>$event</code>占位符，即表示这是一个事件对象，那么<code>test</code>函数的<code>c</code>参数，就是一个事件对象了。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #6A737D">//template</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">&lt;</span><span style="color: #E1E4E8">button @click</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">&quot;test(5,6,$event)&quot;</span><span style="color: #F97583">&gt;</span><span style="color: #E1E4E8">点击</span><span style="color: #F97583">&lt;/</span><span style="color: #E1E4E8">button</span><span style="color: #F97583">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// ts</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">test</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">a</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">b</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">c</span><span style="color: #F97583">:</span><span style="color: #B392F0">Event</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">	console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;print&#39;</span><span style="color: #E1E4E8">,a,b,c)</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<ol>
<li>
<p>原生事件：</p>
<ul>
<li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）</li>
<li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li>
</ul>
</li>
<li>
<p>自定义事件：</p>
<ul>
<li>事件名是任意名称</li>
<li><strong>事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong></li>
</ul>
</li>
</ol>
<p>父组件在调用子组件的时候，通过<code>@xxx = &quot;xxx&quot;</code>来定义一个自定义事件</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">&lt;!--</span><span style="color: #E1E4E8">在父组件中，给子组件Child绑定自定义事件：</span><span style="color: #F97583">--&gt;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">&lt;</span><span style="color: #E1E4E8">Child @send</span><span style="color: #F97583">-</span><span style="color: #E1E4E8">toy</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">&quot;toy = $event&quot;</span><span style="color: #F97583">/&gt;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">   ​  </span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">&lt;!--</span><span style="color: #E1E4E8">注意区分原生事件与自定义事件中的$event</span><span style="color: #F97583">--&gt;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #F97583">&lt;</span><span style="color: #E1E4E8">button @click</span><span style="color: #F97583">=</span><span style="color: #9ECBFF">&quot;toy = $event&quot;</span><span style="color: #F97583">&gt;</span><span style="color: #E1E4E8">测试</span><span style="color: #F97583">&lt;/</span><span style="color: #E1E4E8">button</span><span style="color: #F97583">&gt;</span></span></code></pre></div></div></figure>
<p>子组件，需要调用<code>defineEmits</code>，并且传入一个数组来进行接收</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #6A737D">// 声明事件</span></span>
<span class="line"><span style="color: #B392F0">defineEmits</span><span style="color: #E1E4E8">([</span><span style="color: #9ECBFF">&#39;send-toy&#39;</span><span style="color: #E1E4E8">])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #6A737D">//子组件中，触发事件：  </span></span>
<span class="line"><span style="color: #E1E4E8">   </span><span style="color: #79B8FF">this</span><span style="color: #E1E4E8">.</span><span style="color: #B392F0">$emit</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;send-toy&#39;</span><span style="color: #E1E4E8">, 具体数据)</span></span></code></pre></div></div></figure>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240315191404.png" alt="" data-caption="" loading="lazy"></p>
<p>子组件<code>emit('haha',666)</code>中的这个666在处罚的时候会以参数的形式被传递到父组件中的<code>xyz</code>函数的<code>value</code>参数中去，同理666可以替换为ref定义的<code>toy</code>数据。</p>
<p>另外自定义组件的命名推荐使用肉串命名<code>kebab-case</code>，比如<code>my-event</code></p>
<h3 id="mitt">mitt<a class="anchor" href="#mitt">·</a></h3>
<p>可以实现任意组件通信，有种一拍即合的感觉，学到了就会了，<code>mitt</code>就像是组件中的中间人。</p>
<p>首先就是要安装<code>mitt</code></p>
<figure class="shiki shell"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">npm</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">i</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">mitt</span></span></code></pre></div></div></figure>
<p>一般是放在<code>utils</code>或者<code>tools</code>文件夹中写一个<code>emitter.ts</code>文件，然后在项目文件中需要的时候进行引用，和自定义事件挺像的。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 引入mitt</span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> mitt </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;miit&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 调用miit得到emitter，emitter可以绑定以及触发事件。</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">emitter</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">mitt</span><span style="color: #E1E4E8">()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 绑定事件</span></span>
<span class="line"><span style="color: #E1E4E8">emitter.</span><span style="color: #B392F0">on</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;abc&#39;</span><span style="color: #E1E4E8">,(</span><span style="color: #FFAB70">value</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;abc事件被触发&#39;</span><span style="color: #E1E4E8">,value)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">emitter.</span><span style="color: #B392F0">on</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;xyz&#39;</span><span style="color: #E1E4E8">,(</span><span style="color: #FFAB70">value</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;xyz事件被触发&#39;</span><span style="color: #E1E4E8">,value)</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">setInterval</span><span style="color: #E1E4E8">(() </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #6A737D">// 触发事件</span></span>
<span class="line"><span style="color: #E1E4E8">emitter.</span><span style="color: #B392F0">emit</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;abc&#39;</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">666</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">emitter.</span><span style="color: #B392F0">emit</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;xyz&#39;</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">777</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">}, </span><span style="color: #79B8FF">1000</span><span style="color: #E1E4E8">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #B392F0">setTimeout</span><span style="color: #E1E4E8">(() </span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #6A737D">// 清理事件 全全部绑定的都清理掉了</span></span>
<span class="line"><span style="color: #E1E4E8">emitter.all.</span><span style="color: #B392F0">clear</span><span style="color: #E1E4E8">()</span></span>
<span class="line"><span style="color: #E1E4E8">}, </span><span style="color: #79B8FF">3000</span><span style="color: #E1E4E8">); </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 暴露emitter</span></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> emitter</span></span></code></pre></div></div></figure>
<p><code>mitt</code> 提供了四个主要方法:</p>
<ol>
<li><strong>on(event, handler)</strong>
<ul>
<li>绑定事件</li>
</ul>
</li>
<li><strong>off(event, handler)</strong>
<ul>
<li>解绑事件</li>
</ul>
</li>
<li><strong>emit(event, …args)</strong>
<ul>
<li>触发事件</li>
</ul>
</li>
<li><strong>all.clear()</strong>
<ul>
<li>清除全部事件</li>
</ul>
</li>
</ol>
<p>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> emitter </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;@/utils/emitter&quot;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { onUnmounted } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"><span style="color: #6A737D">// 绑定事件  </span></span>
<span class="line"><span style="color: #E1E4E8">emitter.</span><span style="color: #B392F0">on</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;send-toy&#39;</span><span style="color: #E1E4E8">,(</span><span style="color: #FFAB70">value</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{  </span></span>
<span class="line"><span style="color: #E1E4E8">  console.</span><span style="color: #B392F0">log</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;send-toy事件被触发&#39;</span><span style="color: #E1E4E8">,value)  </span></span>
<span class="line"><span style="color: #E1E4E8">})  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"><span style="color: #6A737D">// 在组件卸载时解绑send-toy事件，可以释放内存，很必要。</span></span>
<span class="line"><span style="color: #B392F0">onUnmounted</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 解绑事件  </span></span>
<span class="line"><span style="color: #E1E4E8">  emitter.</span><span style="color: #B392F0">off</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;send-toy&#39;</span><span style="color: #E1E4E8">)  </span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>提供数据的组件，在合适的时候触发事件</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> emitter </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;@/utils/emitter&quot;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">sendToy</span><span style="color: #E1E4E8">(){  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 触发事件  </span></span>
<span class="line"><span style="color: #E1E4E8">  emitter.</span><span style="color: #B392F0">emit</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;send-toy&#39;</span><span style="color: #E1E4E8">,toy.value)  </span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p>
<h3 id="v-model通信传值">v-model通信传值<a class="anchor" href="#v-model通信传值">·</a></h3>
<p>ui组件库的底层，大量使用v-model进行通信，这里是v-model的底层原理。</p>
<p>v-model是双向绑定，它的底层原理是一个动态的value值<code>:value='xxx'</code>，加上<code>@input='xxx = $event.target.value'</code></p>
<p>$event:事件对象，target，发生事件的本体，value就拿到了他的值。</p>
<p><strong>v-model用在html标签上</strong></p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">// 两个写法是等价的</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">// v-model写法</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">input</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">type</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;text&#39;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">v-model</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;</span><span style="color: #E1E4E8">username</span><span style="color: #9ECBFF">&#39;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">// 原生写法</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;input type=&#39;text&#39; :value=&quot;username&quot; @input=&quot;username = $event.target.value&quot;&gt;</span></span></code></pre></div></div></figure>
<p><strong>v-model用在组件标签上</strong></p>
<p>我们正常使用的是上面的写法，但是最终会被转化成为下面的写法。</p>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="https://gitee.com/sawr/personalimage/raw/master/img/20240316160501.png" alt="" data-caption="" loading="lazy"></p>
<p>组件接收使用</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">input</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">type</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;text&#39;</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">value</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">modelValue</span><span style="color: #9ECBFF">&quot;</span></span>
<span class="line"><span style="color: #E1E4E8">@</span><span style="color: #B392F0">input</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #B392F0">emit</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;update:modelValue = $event.target.value&#39;</span><span style="color: #E1E4E8">)</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8"> &gt;</span></span></code></pre></div></div></figure>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #B392F0">defineProps</span><span style="color: #E1E4E8">([</span><span style="color: #9ECBFF">&#39;modelValue&#39;</span><span style="color: #E1E4E8">])</span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">emit</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">defineEmits</span><span style="color: #E1E4E8">([update:modelValue])</span></span></code></pre></div></div></figure>
<p>$event就是dom事件对象，一般在组件标签上使用  $event，而且HTML原生标签中使用 $event.target用来获取DOM对象。</p>
<p>$event到底是啥？啥时候能.target？</p>
<p>对于原生事件，$event就是事件对象 =&gt; 能.target
对于自定义事件，$event就是触发事件时，所传递的数据 不能.target</p>
<p>v-model既能父传子也能子传父。</p>
<h4 id="v-model多个写法"><strong>v-model多个写法</strong><a class="anchor" href="#v-model多个写法">·</a></h4>
<p>即可以在一个标签上可以写多个<code>v-model</code>，写法如下，即可以传入多个值。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">el-input</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">v-model</span><span style="color: #E1E4E8">:</span><span style="color: #B392F0">mingcheng</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;</span><span style="color: #E1E4E8">username</span><span style="color: #9ECBFF">&#39;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">v-model</span><span style="color: #E1E4E8">:</span><span style="color: #B392F0">mima</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;</span><span style="color: #E1E4E8">password</span><span style="color: #9ECBFF">&#39;</span><span style="color: #E1E4E8"> /&gt;</span></span></code></pre></div></div></figure>
<h3 id="attrs">$attrs<a class="anchor" href="#attrs">·</a></h3>
<ol>
<li>
<p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖→孙</strong>）。可以理解父组件通过子组件来传递给孙组件。</p>
</li>
<li>
<p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p>
<blockquote>
<p>注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p>
</blockquote>
</li>
</ol>
<p>简单来说，就是你传了a、b、c三个值，但是只有a被<code>props</code>接收了，那么剩下的b、c就都存在<code>attrs</code>里面。</p>
<p>可以直接在模板上通过<code>&#123;&#123; $attrs &#125;&#125;</code>来查看</p>
<p>单项传递数据</p>
<p>父组件</p>
<p><code>v-bind=&quot;&#123;x:100,y:200&#125;&quot;</code> == <code>:x=100 :y=200</code> 这两个写法是一样的，如果子组件不进行使用这些数据，那么可以直接在孙组件标签上添加<code>v-bind=&quot;$attrs&quot;</code>，来直接传递给孙组件。</p>
<p>然后孙组件就可以通过<code>defineProps</code>来直接接收父组件的东西了。</p>
<p>如果要孙组件传递给父组件，那么在传入的时候加入一个回调函数，当然这个函数也会被包含在<code>$attrs</code>中，孙组件直接接收进行使用就可以了。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 父组件</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> a </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">1</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #B392F0">updateA</span><span style="color: #E1E4E8">(value:number){</span></span>
<span class="line"><span style="color: #E1E4E8">	a.value </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> value</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// updateA=&quot;updateA&quot; 在子组件标签中传入</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 孙组件接收后调用，加入给函数传入一个数字6，那么在子组件调用一次，那么a这个数据就会+6，无论是在父组件还是子组件是。</span></span></code></pre></div></div></figure>
<h3 id="refs-和-parent">$refs 和 $parent<a class="anchor" href="#refs-和-parent">·</a></h3>
<ol>
<li>
<p>概述：</p>
<ul>
<li><code>$refs</code>用于 ：<strong>父→子。</strong></li>
<li><code>$parent</code>用于：<strong>子→父。</strong></li>
</ul>
</li>
<li>
<p>原理如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$refs</code></td>
<td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td>
</tr>
<tr>
<td><code>$parent</code></td>
<td>值为对象，当前组件的父组件实例对象。</td>
</tr>
</tbody>
</table>
</li>
</ol>
<p>通过<strong>父组件</strong>来改<strong>子组件</strong>中的内容，可以在父组件中给<strong>子组件标签</strong>打上<code>ref='xxx'</code>记号，然后在<strong>子组件</strong>通过宏函数把数据导出，导出后此时的<code>ref</code>中的<code>xxx</code>，就可以拿到子组件导出来的数据了，然后就可以进行操作了。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// 把数据交给外部</span></span>
<span class="line"><span style="color: #B392F0">defineExpose</span><span style="color: #E1E4E8">({数据铭,函数名})</span></span></code></pre></div></div></figure>
<p><code>$refs</code>可以直接调用，里面包含了所有通过<code>ref</code>打上标签的子组件。</p>
<p>假如父组件中引入了两个子组件，那么通过一个普通的按钮来创建一个点击方法，这个方法里面的参数传入<code>$refs</code>，然后在就可以打印出来这两个子组件的<strong>实例对象</strong></p>
<p>两个子组件中有相同的一个数据，想让他们每次点击都+2个。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8"> @</span><span style="color: #B392F0">clikc</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #B392F0">getAllChild</span><span style="color: #E1E4E8">($refs)</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">Child1</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;c1&quot;</span><span style="color: #B392F0">)</span><span style="color: #E1E4E8">/&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">Child2</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref(</span><span style="color: #FDAEB7; font-style: italic">&quot;c2&quot;)/</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #6A737D">// 按钮中单击事件的函数，这个refs的确是一个对象，然后里面的key我可以确定是一个字符串，里面存的东西我不确定所以用any，但是可以any一把梭哈</span></span>
<span class="line"><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">getAllChild</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">refs</span><span style="color: #F97583">:</span><span style="color: #E1E4E8">{</span><span style="color: #FFAB70">key</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #F97583">:</span><span style="color: #79B8FF">any</span><span style="color: #E1E4E8">}){</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #6A737D">// 遍历出来每个组件中的相同那个数据,然后+2</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">for</span><span style="color: #E1E4E8"> (key </span><span style="color: #F97583">in</span><span style="color: #E1E4E8"> refs) {</span></span>
<span class="line"><span style="color: #E1E4E8">		refs[key].number </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">2</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>反过来<code>$parent</code>就是拿到父亲的数据，用法都一样，当然了父组件也要加上<code>defineExpose(&#123;数据名&#125;)</code>进行向外部提供数据。</p>
<h3 id="provide、inject-很好用">provide、inject 很好用<a class="anchor" href="#provide、inject-很好用">·</a></h3>
<ol>
<li>概述：实现<strong>祖孙组件</strong>直接通信，不打扰子组件。</li>
<li>具体使用：
<ul>
<li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li>
<li>在后代组件中通过<code>inject</code>配置来声明接收数据</li>
<li>这两个都不带响应式。</li>
</ul>
</li>
</ol>
<p><strong>具体编码</strong>：</p>
<p>【第一步】父组件中，使用<code>provide</code>提供数据。</p>
<p>引入<code>provide</code>函数，然后进行调用。</p>
 <figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;father&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;父组件&lt;/</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;资产：{{ money }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;汽车：{{ car }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8"> @</span><span style="color: #B392F0">click</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">money </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;资产+1&lt;/</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8"> @</span><span style="color: #B392F0">click</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">car.price </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">1</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;汽车价格+1&lt;/</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #79B8FF">Child</span><span style="color: #E1E4E8">/&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;Father&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> Child </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;./Child.vue&#39;</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { ref,reactive,provide } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 数据  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> money </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">100</span><span style="color: #E1E4E8">)  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> car </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({  </span></span>
<span class="line"><span style="color: #E1E4E8">    brand:</span><span style="color: #9ECBFF">&#39;奔驰&#39;</span><span style="color: #E1E4E8">,  </span></span>
<span class="line"><span style="color: #E1E4E8">    price:</span><span style="color: #79B8FF">100</span><span style="color: #E1E4E8">  </span></span>
<span class="line"><span style="color: #E1E4E8">  })  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 用于更新money的方法  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">function</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">updateMoney</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">value</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">){  </span></span>
<span class="line"><span style="color: #E1E4E8">    money.value </span><span style="color: #F97583">+=</span><span style="color: #E1E4E8"> value  </span></span>
<span class="line"><span style="color: #E1E4E8">  }  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 向后代提供数据  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 数据 方法 对象 都提供出去，注意响应式数据不需要.value，如果加上那么就不会是响应式数据了。</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">provide</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;moneyContext&#39;</span><span style="color: #E1E4E8">,{money,updateMoney})  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #B392F0">provide</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;car&#39;</span><span style="color: #E1E4E8">,car)  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p><strong>函数用于孙传父</strong></p>
<blockquote>
<p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p>
</blockquote>
<p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p>
<p><code>inject</code>第一个参数是接收的<strong>名称</strong>，和父组件提供的名称一样；第二个参数是<strong>默认值</strong>，即如果没有接收到就是用默认的替代；</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;grand-child&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;我是孙组件&lt;/</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;资产：{{ money }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;汽车：{{ car }}&lt;/</span><span style="color: #85E89D">h4</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">    &lt;</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8"> @</span><span style="color: #B392F0">click</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #B392F0">updateMoney</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">6</span><span style="color: #E1E4E8">)</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;点我&lt;/</span><span style="color: #85E89D">button</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">​  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;GrandChild&quot;</span><span style="color: #E1E4E8">&gt;  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { inject } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span><span style="color: #E1E4E8">;  </span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #6A737D">// 注入数据  可以写多个 并且可以直接解构</span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {money,updateMoney} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">inject</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;moneyContext&#39;</span><span style="color: #E1E4E8">,{money:</span><span style="color: #79B8FF">0</span><span style="color: #E1E4E8">,</span><span style="color: #B392F0">updateMoney</span><span style="color: #E1E4E8">:(</span><span style="color: #FFAB70">x</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{}})  </span></span>
<span class="line"><span style="color: #E1E4E8"> </span><span style="color: #6A737D">// 数据名 默认值</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> car </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">inject</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;car&#39;</span><span style="color: #E1E4E8">,{brand:</span><span style="color: #9ECBFF">&#39;奔驰&#39;</span><span style="color: #E1E4E8">,price:</span><span style="color: #79B8FF">100</span><span style="color: #E1E4E8">})  </span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<h3 id="slot-插槽">slot 插槽<a class="anchor" href="#slot-插槽">·</a></h3>
<p>一般是同时呈现多个组件，但是组件里面的内容只有些许的不一样，这样就不用写多个组件，只需要用一个组件来完成。</p>
<h4 id="默认插槽">默认插槽<a class="anchor" href="#默认插槽">·</a></h4>
<p><img onerror="imgOnError(this);" data-fancybox="gallery" src="http://49.232.112.44/images/default_slot.png" alt="img" data-caption="img" loading="lazy"></p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">父组件中：传递一个列表过去</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">Category</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">title</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;今日热门游戏&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;ul&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;/ul&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;/</span><span style="color: #85E89D">Category</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">子组件中：</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;item&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">            &lt;</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;{{ title }}&lt;/</span><span style="color: #85E89D">h3</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">            </span><span style="color: #6A737D">&lt;!-- 默认插槽 --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">            &lt;</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8">&gt;&lt;/</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>在父组件中使用子组件，并且使用了<strong>双标签</strong>，可以在双标签的中间<strong>夹一些html标签</strong>，并且这些标签会在子组件中的<code>&lt;slot&gt;&lt;/slot&gt;</code>标签的位置进行渲染。</p>
<p>假如你什么数据也没传过来，可以通过<code>&lt;slot&gt;默认内容&lt;/slot&gt;</code>这样当你没夹杂标签就会显示<strong>默认</strong>的内容。</p>
<hr>
<p>这样当我们实现最上面图片的需求时，我们只需要写<strong>三个子组件标签</strong>，并夹杂着不同的内容带过去，这些不同的内容都被放在了<strong>子组件</strong>中的<code>&lt;slot&gt;&lt;/slot&gt;</code>标签中。</p>
<p>注意<code>slot</code>标签做的是呈现，比如样式什么的还是在父组件中进行修改比较好，并且只需要写一个<code>slot</code>标签就行，写多个就会呈现多次。</p>
<p>简单理解：你在子组件中挖了一个坑，这个坑等着你来填土；这三个东西都可以填进来。</p>
<h4 id="具名插槽">具名插槽<a class="anchor" href="#具名插槽">·</a></h4>
<p>就是给坑取名字，然后让对应的名字到对应的坑中。</p>
<p>子组件的<code>slot</code>使用<code>name</code>来取一个名字，默认名为：<code>default</code></p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;s1&#39;</span><span style="color: #E1E4E8">&gt;&lt;/</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&#39;s&#39;</span><span style="color: #E1E4E8">&gt;&lt;/</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>父组件把标签都放到<code>template</code>中，然后通过<code>v-slot:x</code>来命名，也可以通过<code>#x</code>来命名，可以写多个；注意<code>template</code>是写在<strong>组件标签</strong>内的。</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;</span><span style="color: #79B8FF">Chirld</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">		&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">v-slot</span><span style="color: #E1E4E8">:</span><span style="color: #B392F0">s</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">			&lt;</span><span style="color: #85E89D">ul</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">				&lt;</span><span style="color: #85E89D">li</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">v-for</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">g </span><span style="color: #F97583">in</span><span style="color: #E1E4E8"> games</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">key</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">g.id</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;{{ g.name }}&lt;/</span><span style="color: #85E89D">li</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">			&lt;/</span><span style="color: #85E89D">ul</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">		&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">		// 这里使用 &#39;#&#39; = &#39;v-slot&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">		&lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8"> #</span><span style="color: #B392F0">s1</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">			&lt;</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;标题&lt;/</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">		&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">	&lt;/</span><span style="color: #79B8FF">Chirld</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">&lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>在子组件中通过名字来引用，在子组件中<code>s1</code>名称对应的标题会在上方，而<code>s</code>对应的会在下方。样式之类的只需要在父组件中进行设置就可以了。</p>
<h4 id="作用域插槽">作用域插槽<a class="anchor" href="#作用域插槽">·</a></h4>
<p>理解：数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定）</p>
<figure class="shiki vue"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #E1E4E8">父组件中：</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #85E89D">Game</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">v-slot</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">params</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;ul&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;{{ g.name }}&lt;/li&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;/ul&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;/</span><span style="color: #85E89D">Game</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">子组件中：</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">class</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;category&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;今日游戏榜单&lt;/</span><span style="color: #85E89D">h2</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">          &lt;</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8"> :</span><span style="color: #B392F0">games</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8">games</span><span style="color: #9ECBFF">&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">a</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;哈哈&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">x</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;hello&quot;</span><span style="color: #E1E4E8">&gt;&lt;/</span><span style="color: #85E89D">slot</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        &lt;/</span><span style="color: #85E89D">div</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;/</span><span style="color: #85E89D">template</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">      &lt;</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setup</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">lang</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;ts&quot;</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">name</span><span style="color: #E1E4E8">=</span><span style="color: #9ECBFF">&quot;Category&quot;</span><span style="color: #E1E4E8">&gt;</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {reactive} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #F97583">let</span><span style="color: #E1E4E8"> games </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">([</span></span>
<span class="line"><span style="color: #E1E4E8">          {id:</span><span style="color: #9ECBFF">&#39;asgdytsa01&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;英雄联盟&#39;</span><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">          {id:</span><span style="color: #9ECBFF">&#39;asgdytsa02&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;王者荣耀&#39;</span><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">          {id:</span><span style="color: #9ECBFF">&#39;asgdytsa03&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;红色警戒&#39;</span><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">          {id:</span><span style="color: #9ECBFF">&#39;asgdytsa04&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;斗罗大陆&#39;</span><span style="color: #E1E4E8">}</span></span>
<span class="line"><span style="color: #E1E4E8">        ])</span></span>
<span class="line"><span style="color: #E1E4E8">      &lt;/</span><span style="color: #85E89D">script</span><span style="color: #E1E4E8">&gt;</span></span></code></pre></div></div></figure>
<p>在父组件中的<strong>子组件标签</strong>中<code>v-slot=&quot;params&quot;</code>表明<code>params</code>作为一个变量名接收了子组件slot标签<code>&lt;slot :games=&quot;games&quot; a=&quot;哈哈&quot; x=&quot;hello&quot;&gt;&lt;/slot&gt;</code>里面传递过来的<code>games</code>、<code>a</code>、<code>x</code>三个参数、即为所有参数。</p>
<p>对于命名还是和之前一样，比如：<code>v-slot:s=&quot;params&quot;</code>，子组件：<code>name='s'</code>。</p>
<p>数据的维护什么都在子组件中，但是根据这些数据所生成的结构是父组件决定的。</p>
<p>简单理解：压岁钱在孩子那，但是根据压岁钱买的东西，却由父亲来决定。</p>
<h2 id="其他API">其他API<a class="anchor" href="#其他API">·</a></h2>
<h3 id="shallowRef-与-shallowReactive">shallowRef 与 shallowReactive<a class="anchor" href="#shallowRef-与-shallowReactive">·</a></h3>
<p>需要从<code>vue</code>中引用</p>
<p><code>shallowRef</code></p>
<ol>
<li>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。</li>
<li>用法：</li>
</ol>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> myVar </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">shallowRef</span><span style="color: #E1E4E8">(initialValue);</span></span></code></pre></div></div></figure>
<ol start="3">
<li>特点：只跟踪引用值的变化，不关心值内部的属性变化。</li>
</ol>
<p>简单理解：我可以对<code>person.value</code>进行修改值，并且有响应式处理，但是我对<code>person.value.name</code>就没有响应式处理了，就是只可以<code>.</code>一次。</p>
<p>如果你关注的是数据的整体修改，那么就使用<code>shallowRef</code>。</p>
<p><code>shallowReactive</code> 同理。</p>
<p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的。</p>
<blockquote>
<p>通过使用 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> 和 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p>
</blockquote>
<h3 id="readonly-与-shallowReadonly">readonly 与 shallowReadonly<a class="anchor" href="#readonly-与-shallowReadonly">·</a></h3>
<p>都是需要通过vue来引用的，然后直接使用。</p>
<p><code>readonly</code></p>
<ol>
<li>作用：用于创建一个对象的深只读副本，限制所有层次。</li>
<li>用法：</li>
</ol>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">original</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({ </span><span style="color: #F97583">...</span><span style="color: #E1E4E8"> });  </span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">readOnlyCopy</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">readonly</span><span style="color: #E1E4E8">(original);</span></span></code></pre></div></div></figure>
<p>当你在修改<code>original</code>的时候，那么<code>readOnlyCopy</code>的值也会跟着响应式进行变化，是有关联关系的，但是如果直接修改<code>readOnlyCopy</code>则无法修改，会提示警告.</p>
<p>相当于复制了一份只能用来使用但是不能修改的数据。</p>
<ol start="3">
<li>特点：
<ul>
<li>对象的所有嵌套属性都将变为只读，并且readonly的参数必须是响应式数据(ref,reactive)。</li>
<li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li>
</ul>
</li>
<li>应用场景：
<ul>
<li>创建不可变的状态快照。</li>
<li>保护全局状态或配置不被修改。</li>
</ul>
</li>
</ol>
<p><code>shallowReadonly</code></p>
<p>与 <code>readonly</code> 类似，但只作用于对象的顶层属性，就是只限制第一层，更深层次的就不限制了。</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">original</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({ </span><span style="color: #F97583">...</span><span style="color: #E1E4E8"> });  </span></span>
<span class="line"><span style="color: #F97583">const</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">shallowReadOnlyCopy</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">shallowReadonly</span><span style="color: #E1E4E8">(original);</span></span></code></pre></div></div></figure>
<h3 id="toRaw-与-markRaw">toRaw 与 markRaw<a class="anchor" href="#toRaw-与-markRaw">·</a></h3>
<p>需要从<code>vue</code>中引用。</p>
<p><code>toRaw</code> 函数用于获取由 <code>ref</code>、<code>reactive</code>、<code>readonly</code> 等创建的响应式对象的原始未代理的对象。当你需要访问到对象的原始数据，而不是其响应式代理时，就可以使用 <code>toRaw</code>； <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p>
<p>语法：<code>const raw = toRaw(proxy)</code></p>
<blockquote>
<p>官网描述：这是一个可以用于临时读取而不引起代理访问/跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p>
</blockquote>
<blockquote>
<p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p>
</blockquote>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> { reactive,toRaw,markRaw,isReactive } </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&quot;vue&quot;</span><span style="color: #E1E4E8">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">/* toRaw */</span></span>
<span class="line"><span style="color: #6A737D">// 响应式对象</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> person </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">({name:</span><span style="color: #9ECBFF">&#39;tony&#39;</span><span style="color: #E1E4E8">,age:</span><span style="color: #79B8FF">18</span><span style="color: #E1E4E8">})</span></span>
<span class="line"><span style="color: #6A737D">// 原始对象</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> rawPerson </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">toRaw</span><span style="color: #E1E4E8">(person)</span></span></code></pre></div></div></figure>
<p><code>markRaw</code></p>
<p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p>
<blockquote>
<p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p>
</blockquote>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">/* markRaw */</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> citys </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">markRaw</span><span style="color: #E1E4E8">([</span></span>
<span class="line"><span style="color: #E1E4E8">  {id:</span><span style="color: #9ECBFF">&#39;asdda01&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;北京&#39;</span><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">  {id:</span><span style="color: #9ECBFF">&#39;asdda02&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;上海&#39;</span><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">  {id:</span><span style="color: #9ECBFF">&#39;asdda03&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;天津&#39;</span><span style="color: #E1E4E8">},</span></span>
<span class="line"><span style="color: #E1E4E8">  {id:</span><span style="color: #9ECBFF">&#39;asdda04&#39;</span><span style="color: #E1E4E8">,name:</span><span style="color: #9ECBFF">&#39;重庆&#39;</span><span style="color: #E1E4E8">}</span></span>
<span class="line"><span style="color: #E1E4E8">])</span></span>
<span class="line"><span style="color: #6A737D">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了,citys2会没有作用。</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> citys2 </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">reactive</span><span style="color: #E1E4E8">(citys)</span></span></code></pre></div></div></figure>
<h3 id="customRef">customRef<a class="anchor" href="#customRef">·</a></h3>
<p>需要从<code>vue</code>中引用。</p>
<p>自定义Ref作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p>
<p>普通的ref定义的数据，只要数据一变化，页面立马就更新，假如想要间隔一秒变化，那就办不到。</p>
<p>customRef实现修改数据一秒后页面变化：</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {customRef} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 定义一个默认值</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> initValue </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;你好&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 定义一个时间</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> timer</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 使用Vue提供的customRef定义响应式数据</span></span>
<span class="line"><span style="color: #6A737D">// 箭头函数要接收从底层传过来的两个参数,track(跟踪)、trigger(触发)</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> msg </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">customRef</span><span style="color: #E1E4E8">((</span><span style="color: #FFAB70">track</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">trigger</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">return</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	    </span><span style="color: #6A737D">// msg被读取调用get</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">get</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">track</span><span style="color: #E1E4E8">() </span><span style="color: #6A737D">// 告诉Vue数据msg很重要，你要对msg进行持续关注，一旦msg变化就要去更新。</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 要有返回值</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> initValue</span></span>
<span class="line"><span style="color: #E1E4E8">		},</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// msg被修改调用set;value参数是修改后的最新值</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">set</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">value</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 每次执行都清除一下</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">clearTimeout</span><span style="color: #E1E4E8">(timer)</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 定时器</span></span>
<span class="line"><span style="color: #E1E4E8">			time </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setTimeout</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">				initValue </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> value</span></span>
<span class="line"><span style="color: #E1E4E8">				</span><span style="color: #B392F0">trigger</span><span style="color: #E1E4E8">() </span><span style="color: #6A737D">// 通知Vue，数据msg变化了</span></span>
<span class="line"><span style="color: #E1E4E8">			},</span><span style="color: #79B8FF">1000</span><span style="color: #E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div></div></figure>
<p>读数据之前要调用<code>track</code>，改数据改完了之后要调用<code>trigger</code>，必须同时存在，这两个都加上才会实现响应式效果，可以理解为在自己实现<code>ref</code>。</p>
<p>一般会把自定义ref封装成<code>hooks</code>。</p>
<p>巩固一下hooks：一般以<code>useXxx</code>命名比如<code>useMsgRef.ts</code>，然后把所有代码都给拿过来，hooks是一个函数，所以要包裹在函数里.</p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #6A737D">// useMsgRef.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {customRef} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">export</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">default</span><span style="color: #E1E4E8"> </span><span style="color: #F97583">function</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">initValue</span><span style="color: #F97583">:</span><span style="color: #79B8FF">string</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">delay</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span><span style="color: #E1E4E8">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 定义一个时间</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> timer</span><span style="color: #F97583">:</span><span style="color: #79B8FF">number</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 使用Vue提供的customRef定义响应式数据</span></span>
<span class="line"><span style="color: #6A737D">// 箭头函数要接收从底层传过来的两个参数,track(跟踪)、trigger(触发)</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> msg </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">customRef</span><span style="color: #E1E4E8">((</span><span style="color: #FFAB70">track</span><span style="color: #E1E4E8">,</span><span style="color: #FFAB70">trigger</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #F97583">return</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">	    </span><span style="color: #6A737D">// msg被读取调用get</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">get</span><span style="color: #E1E4E8">(){</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">track</span><span style="color: #E1E4E8">() </span><span style="color: #6A737D">// 告诉Vue数据msg很重要，你要对msg进行持续关注，一旦msg变化就要去更新。</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 要有返回值</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #F97583">return</span><span style="color: #E1E4E8"> initValue</span></span>
<span class="line"><span style="color: #E1E4E8">		},</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #6A737D">// msg被修改调用set;value参数是修改后的最新值</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #B392F0">set</span><span style="color: #E1E4E8">(</span><span style="color: #FFAB70">value</span><span style="color: #E1E4E8">){</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 每次执行都清除一下</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #B392F0">clearTimeout</span><span style="color: #E1E4E8">(timer)</span></span>
<span class="line"><span style="color: #E1E4E8">			</span><span style="color: #6A737D">// 定时器</span></span>
<span class="line"><span style="color: #E1E4E8">			time </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">setTimeout</span><span style="color: #E1E4E8">(()</span><span style="color: #F97583">=&gt;</span><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">				initValue </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> value</span></span>
<span class="line"><span style="color: #E1E4E8">				</span><span style="color: #B392F0">trigger</span><span style="color: #E1E4E8">() </span><span style="color: #6A737D">// 通知Vue，数据msg变化了</span></span>
<span class="line"><span style="color: #E1E4E8">			},delay)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">	}</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span>
<span class="line"><span style="color: #6A737D">// hooks最后要有返回值</span></span>
<span class="line"><span style="color: #F97583">return</span><span style="color: #E1E4E8"> {msg}</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div></div></figure>
<p>此时就可以在代码中进行引用<code>useMsgRef</code></p>
<figure class="shiki ts"><div class='codeblock'><div class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div><div class="code"><pre class="shiki github-dark"><code><span class="line"><span style="color: #F97583">import</span><span style="color: #E1E4E8"> {useMsgRef} </span><span style="color: #F97583">from</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">&#39;./useMsgRef&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #6A737D">// 普通ref</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> msg </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">ref</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;你好&#39;</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #6A737D">// 自定义ref，可以增加自己的逻辑，注意解构</span></span>
<span class="line"><span style="color: #F97583">let</span><span style="color: #E1E4E8"> {msg{} </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">useMsgRef</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">&#39;你好&#39;</span><span style="color: #E1E4E8">,</span><span style="color: #79B8FF">2000</span><span style="color: #E1E4E8">)</span></span></code></pre></div></div></figure>
<blockquote>
<p>总结：所谓customRef(自定义ref)就是在原来ref的基础上，加上一些自己的逻辑，这个主要聊的地方就是<code>track</code>(跟踪)和<code>trigger</code>(触发)。</p>
</blockquote>
<h2 id="Vue3新组件">Vue3新组件<a class="anchor" href="#Vue3新组件">·</a></h2>

    <hr>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <svg t="1711088601860" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9444" width="16" height="16"><path d="M797.653 932.511l80.935-39.61c9.902 36.182 15.234 74.65 15.234 113.69v8.188h-87.98v-6.475c0-25.708-2.857-50.846-8.19-75.793zM643.78 715.034a332.254 332.254 0 0 0-175.39-50.084c-185.865 0-336.88 153.3-336.88 342.593v6.475H43.72v-8.19c0-201.099 135.78-370.015 318.788-417.814-113.69-45.514-188.15-156.157-188.15-278.607 0-164.916 131.782-299.554 294.223-299.554 162.06 0 294.222 134.066 294.222 299.554 0 127.02-78.078 235.378-188.15 278.607 39.61 10.474 78.079 26.851 113.119 48.37l-43.99 78.65zM263.863 309.598c0 114.832 91.98 208.526 204.527 208.526 113.119 0 204.528-93.313 204.528-208.526 0-114.833-91.98-208.527-204.528-208.527-112.356 0.381-204.527 93.694-204.527 208.527z m713.37 173.486c-2.856 20.948-6.475 43.039-11.045 67.605-4.57 23.804-9.331 48.37-14.664 72.936-4.57 22.662-9.902 44.943-15.806 67.605l-72.175 40.182c8.76-2.857 17.52-4.57 25.709-7.618 7.046-2.285 14.473-4.57 22.09-6.474 7.618-2.286 13.902-4 18.663-6.475l-7.617 29.136c-2.285 8.189-4 14.473-5.904 18.092-3.428 9.902-8.188 19.234-12.759 27.422-4.57 8.76-9.903 15.806-13.33 22.09-4.57 7.047-9.903 14.474-15.806 19.806l-66.462 19.805L862.4 857.1c-7.046 6.475-15.235 12.188-23.233 19.234-7.047 5.332-15.235 11.045-24.567 17.52-9.33 6.475-19.233 11.616-29.136 16.377-10.474 5.333-22.09 7.618-33.707 8.19-12.188 0-23.805-0.572-35.04-2.857-13.33-1.714-26.28-5.333-38.468-9.332 3.999-6.475 8.189-12.759 12.759-20.948 4-7.046 8.76-14.663 14.473-23.233s11.617-18.662 17.52-29.708c16.949-29.708 33.707-58.273 50.085-86.838s30.85-54.274 43.61-77.507c15.234-26.852 29.136-51.799 42.466-75.793-16.948 19.805-35.04 41.895-53.702 66.462-18.663 24.566-36.754 48.941-54.274 74.079-20.948 30.85-41.325 62.272-60.559 94.456-4.57 7.046-9.331 15.234-14.473 23.804-5.332 8.76-11.045 18.663-16.949 29.137-5.903 10.474-11.616 20.376-18.662 31.421-5.904 10.474-12.188 21.52-18.663 31.422-14.473 23.805-29.136 48.942-44.371 74.65 0.571-7.617 1.714-17.52 3.999-29.707 2.285-10.474 5.903-23.233 11.045-38.468 4.57-15.235 12.188-33.707 21.52-54.274 6.474-12.76 11.044-23.233 13.901-30.85s5.903-12.76 7.617-16.95c1.143-2.856 2.286-6.474 4.57-8.76-1.713-2.284-2.284-6.474-0.57-12.758 0.57-5.904 2.285-14.473 6.474-25.71 3.428-11.044 9.332-26.85 17.52-46.656 8.19-20.376 19.234-42.467 32.565-65.89 13.33-23.805 28.565-46.657 45.514-69.89 16.949-23.233 35.611-46.085 54.845-67.605 18.663-20.947 39.04-40.181 60.558-58.273 20.377-16.948 41.325-30.85 61.701-41.324s40.754-16.949 59.988-18.091c2.475 12.95 1.333 29.707-1.524 50.655z" p-id="9445"></path></svg>
        <strong>本文作者：</strong>ShaoAo<br>
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6336" width="16" height="16"><path d="M552.106667 125.44a245.034667 245.034667 0 1 1 346.453333 346.453333l-113.834667 113.877334a300.714667 300.714667 0 0 0-16.938666-164.053334l40.277333-40.32a117.034667 117.034667 0 1 0-165.461333-165.461333l-170.666667 170.666667a117.034667 117.034667 0 0 0 38.4 191.061333l-93.994667 93.994667a245.034667 245.034667 0 0 1-34.986666-375.552l170.709333-170.666667z m-426.666667 426.666667l113.834667-113.877334a300.544 300.544 0 0 0 16.938666 164.053334l-40.277333 40.32a117.034667 117.034667 0 1 0 165.461333 165.461333l170.666667-170.666667a116.992 116.992 0 0 0-24.106667-184.021333L619.946667 361.386667a245.034667 245.034667 0 0 1 22.613333 366.506666l-170.666667 170.666667a245.034667 245.034667 0 0 1-346.453333-346.453333z" fill="currentColor" p-id="6337"></path></svg>
        <strong>本文链接：</strong><a href="https://sawr.gitee.io/2024/03/04/vue/vue3study/" title="https:&#x2F;&#x2F;sawr.gitee.io&#x2F;2024&#x2F;03&#x2F;04&#x2F;vue&#x2F;vue3study&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;sawr.gitee.io&#x2F;2024&#x2F;03&#x2F;04&#x2F;vue&#x2F;vue3study&#x2F;</a><br>
        
            <svg t="1711088267743" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8243" width="16" height="16"><path d="M475.428571 877.714286C256 877.714286 73.142857 694.857143 73.142857 475.428571S256 73.142857 475.428571 73.142857 877.714286 256 877.714286 475.428571 694.857143 877.714286 475.428571 877.714286m0-877.714286C212.114286 0 0 212.114286 0 475.428571S212.114286 950.857143 475.428571 950.857143 950.857143 738.742857 950.857143 475.428571 738.742857 0 475.428571 0m0 219.428571c-21.942857 0-36.571429 14.628571-36.571428 36.571429v292.571429c0 21.942857 14.628571 36.571429 36.571428 36.571428s36.571429-14.628571 36.571429-36.571428v-292.571429c0-21.942857-14.628571-36.571429-36.571429-36.571429m0 438.857143c-21.942857 0-36.571429 14.628571-36.571428 36.571429s14.628571 36.571429 36.571428 36.571428 36.571429-14.628571 36.571429-36.571428-14.628571-36.571429-36.571429-36.571429" p-id="8244"></path></svg>
<strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议许可，仅作个人记录，转载请说明出处！

        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
   
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/TypeScript/" rel="tag">TypeScript</a> <a class="nexmoefont icon-tag-fill -none-link" href="/tags/Vue/" rel="tag">Vue</a>
    
</div>
  
  
    <script async src="/js/copy-codeblock.js?v=1714719124641"></script>
  

  
      <div class="nexmoe-post-footer">
          <div id="tcomment"></div>
<script src="https://cdn.staticfile.org/twikoo/1.6.31/twikoo.all.min.js"></script>
<script>
  twikoo.init({
    envId: 'https://shaoao-twikoo.hf.space/', 
    el: '#tcomment', // 容器元素
    // region: 'ap-guangzhou', // 环境地域，默认为 ap-shanghai，腾讯云环境填 ap-shanghai 或 ap-guangzhou；Vercel 环境不填
    // path: location.pathname, // 用于区分不同文章的自定义 js 路径，如果您的文章路径不是 location.pathname，需传此参数
    // lang: 'zh-CN', 
  })
</script>

      </div>
  
</div></div><div class="nexmoe-post-right">    <div class="nexmoe-fixed">
        <div class="nexmoe-tool">

            

            
            
            <button class="mdui-fab catalog" style="overflow:unset;">
                <i class="nexmoefont icon-i-catalog"></i>
                <div class="nexmoe-toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E5%92%8CVite%E7%9A%84%E6%9E%84%E5%BB%BA%E5%8C%BA%E5%88%AB"><span class="toc-number">1.</span> <span class="toc-text">Webpack和Vite的构建区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E5%88%9B%E5%BB%BA%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.</span> <span class="toc-text">Vue3创建步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%95%B4%E4%BD%93%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.</span> <span class="toc-text">项目整体文件介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84"><span class="toc-number">4.</span> <span class="toc-text">结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E9%A1%B9%E5%BC%8FAPI%E5%92%8C%E7%BB%84%E5%90%88%E5%BC%8FAPI"><span class="toc-number">4.1.</span> <span class="toc-text">选项式API和组合式API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3-%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95"><span class="toc-number">5.</span> <span class="toc-text">Vue3 核心语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Setup"><span class="toc-number">5.1.</span> <span class="toc-text">Setup</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setup%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">5.2.</span> <span class="toc-text">setup语法糖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#name%E5%90%8D%E7%A7%B0%E6%8F%92%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">name名称插件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">6.</span> <span class="toc-text">响应式数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ref%E5%88%9B%E5%BB%BA%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">6.1.</span> <span class="toc-text">ref创建基本类型响应式数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reactive-%E6%9E%84%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">6.2.</span> <span class="toc-text">reactive 构建对象类型响应式数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref%E5%92%8Creactive%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">6.3.</span> <span class="toc-text">ref和reactive的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#torefs%E5%92%8Ctoref"><span class="toc-number">6.4.</span> <span class="toc-text">torefs和toref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-number">6.5.</span> <span class="toc-text">computed计算属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#watch-%E7%9B%91%E8%A7%86"><span class="toc-number">7.</span> <span class="toc-text">watch 监视</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%9B%91%E8%A7%86ref%E5%AE%9A%E4%B9%89%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">7.1.</span> <span class="toc-text">1.监视ref定义的基本类型数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9B%91%E8%A7%86ref%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">7.2.</span> <span class="toc-text">2.监视ref定义的对象类型数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%9B%91%E8%A7%86reactive%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">7.3.</span> <span class="toc-text">3.监视reactive定义的对象类型数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%9B%91%E8%A7%86ref%E6%88%96reactive%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7"><span class="toc-number">7.4.</span> <span class="toc-text">4.监视ref或reactive定义对象类型数据中的某个属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%9B%91%E8%A7%86%E4%B8%8A%E8%BF%B0%E7%9A%84%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE"><span class="toc-number">7.5.</span> <span class="toc-text">5.监视上述的多个数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#watchEffect"><span class="toc-number">7.6.</span> <span class="toc-text">watchEffect</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E7%9A%84ref%E5%B1%9E%E6%80%A7"><span class="toc-number">8.</span> <span class="toc-text">标签的ref属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TS%E4%B8%AD%E7%9A%84%E6%8E%A5%E5%8F%A3%E3%80%81%E6%B3%9B%E5%9E%8B%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="toc-number">9.</span> <span class="toc-text">TS中的接口、泛型、自定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3"><span class="toc-number">9.1.</span> <span class="toc-text">接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%80%89"><span class="toc-number">9.2.</span> <span class="toc-text">可选</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#props"><span class="toc-number">10.</span> <span class="toc-text">props</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">11.</span> <span class="toc-text">生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vue2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">11.1.</span> <span class="toc-text">vue2的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vue3%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">11.2.</span> <span class="toc-text">vue3生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89hooks"><span class="toc-number">11.3.</span> <span class="toc-text">自定义hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#async%E5%92%8Cawait%E8%A7%A3%E6%9E%90"><span class="toc-number">11.3.1.</span> <span class="toc-text">async和await解析</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">12.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">12.1.</span> <span class="toc-text">两个注意点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-number">12.2.</span> <span class="toc-text">路由器工作模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#to%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">12.3.</span> <span class="toc-text">to的两种写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="toc-number">12.4.</span> <span class="toc-text">命名路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="toc-number">12.5.</span> <span class="toc-text">嵌套路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-number">12.6.</span> <span class="toc-text">路由传参</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-query%E5%8F%82%E6%95%B0"><span class="toc-number">12.6.1.</span> <span class="toc-text">1.query参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-params%E5%8F%82%E6%95%B0"><span class="toc-number">12.6.2.</span> <span class="toc-text">2.params参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84props%E9%85%8D%E7%BD%AE"><span class="toc-number">12.7.</span> <span class="toc-text">路由的props配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84replace%E5%B1%9E%E6%80%A7"><span class="toc-number">12.8.</span> <span class="toc-text">路由的replace属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA-%E9%87%8D%E8%A6%81"><span class="toc-number">12.9.</span> <span class="toc-text">编程式导航(重要)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">12.10.</span> <span class="toc-text">路由重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pinia"><span class="toc-number">13.</span> <span class="toc-text">Pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BAPinia%E7%8E%AF%E5%A2%83"><span class="toc-number">13.1.</span> <span class="toc-text">搭建Pinia环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">13.2.</span> <span class="toc-text">存储数据+读取数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">13.3.</span> <span class="toc-text">修改数据三种方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#storeToRefs"><span class="toc-number">13.4.</span> <span class="toc-text">storeToRefs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#geeters"><span class="toc-number">13.5.</span> <span class="toc-text">geeters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subscribe-%E8%AE%A2%E9%98%85%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">13.6.</span> <span class="toc-text">$subscribe 订阅的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#store%E7%9A%84%E7%BB%84%E5%90%88%E5%BC%8F%E5%86%99%E6%B3%95"><span class="toc-number">13.7.</span> <span class="toc-text">store的组合式写法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">14.</span> <span class="toc-text">组件通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#props-2"><span class="toc-number">14.1.</span> <span class="toc-text">props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6-custom-event"><span class="toc-number">14.2.</span> <span class="toc-text">自定义事件 custom_event</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mitt"><span class="toc-number">14.3.</span> <span class="toc-text">mitt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-model%E9%80%9A%E4%BF%A1%E4%BC%A0%E5%80%BC"><span class="toc-number">14.4.</span> <span class="toc-text">v-model通信传值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#v-model%E5%A4%9A%E4%B8%AA%E5%86%99%E6%B3%95"><span class="toc-number">14.4.1.</span> <span class="toc-text">v-model多个写法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attrs"><span class="toc-number">14.5.</span> <span class="toc-text">$attrs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#refs-%E5%92%8C-parent"><span class="toc-number">14.6.</span> <span class="toc-text">$refs 和 $parent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#provide%E3%80%81inject-%E5%BE%88%E5%A5%BD%E7%94%A8"><span class="toc-number">14.7.</span> <span class="toc-text">provide、inject 很好用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slot-%E6%8F%92%E6%A7%BD"><span class="toc-number">14.8.</span> <span class="toc-text">slot 插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-number">14.8.1.</span> <span class="toc-text">默认插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">14.8.2.</span> <span class="toc-text">具名插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">14.8.3.</span> <span class="toc-text">作用域插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96API"><span class="toc-number">15.</span> <span class="toc-text">其他API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowRef-%E4%B8%8E-shallowReactive"><span class="toc-number">15.1.</span> <span class="toc-text">shallowRef 与 shallowReactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readonly-%E4%B8%8E-shallowReadonly"><span class="toc-number">15.2.</span> <span class="toc-text">readonly 与 shallowReadonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toRaw-%E4%B8%8E-markRaw"><span class="toc-number">15.3.</span> <span class="toc-text">toRaw 与 markRaw</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#customRef"><span class="toc-number">15.4.</span> <span class="toc-text">customRef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E6%96%B0%E7%BB%84%E4%BB%B6"><span class="toc-number">16.</span> <span class="toc-text">Vue3新组件</span></a></li></ol>
                </div>
            </button>
            

            

            <a href="#nexmoe-content" class="backtop toc-link" aria-label="Back To Top" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
        </div>
    </div>
</div></div><div id="nexmoe-footer"><!--!--></div><div id="nexmoe-search-space"><div class="search-container"><div class="search-header"><div class="search-input-container"><input class="search-input" type="text" placeholder="搜索全站" onInput="sinput();"></div><a class="search-close" onclick="sclose();">×</a></div><div class="search-body"></div></div></div><div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2058306854838448" crossorigin="anonymous"></script>
</div><!-- hexo injector body_end start -->
  <script>
  const CODE_CONFIG = {
    beautify: false,
    highlightCopy: true,
    highlightLang: true,
    highlightHeightLimit: 360,
    isHighlightShrink: true,
    copy: {
      success: 'Copy Success',
      error: 'Copy Error',
      noSupport: 'Browser Not Support',
    }
  };
  console.log(
    `%c hexo-shiki-plugin %c v1.0.25 %c https://github.com/nova1751/hexo-shiki-plugin`,
    "color: #fff; background: #5f5f5f",
    "color: #fff; background: #80c8f8",
    ""
  );
  </script>
  <!-- hexo injector body_end end --></body></html>